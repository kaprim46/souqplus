import{G as c,s as r,B as o,H as g,C as s,S as n}from"./app-4aaa95f7.js";const h=c({id:"category",state:()=>({categories:[],subCategories:[],pagination:{current_page:1,last_page:1,per_page:1,total:0},isLoading:!0,filters:{search:"",order_by:"",pagination:1}}),getters:{},actions:{async fetch(i=!1,a=!1){this.isLoading=!0;let e={};this.filters.search&&(e.search=this.filters.search),this.filters.order_by&&(e.order_by=this.filters.order_by),this.filters.pagination&&(e.pagination=1),i&&this.filters.pagination&&(a?this.pagination.current_page--:this.pagination.current_page++,e.page=this.pagination.current_page);try{const{data:t}=await r.get("/dashboard/categories",{params:{...e}});t.ok&&(this.filters.pagination?(this.categories=t.categories.data,this.pagination={current_page:t.categories.current_page,last_page:t.categories.last_page,per_page:t.categories.per_page,total:t.categories.total}):this.categories=t.categories),await o(),this.isLoading=!1}catch{this.isLoading=!1}},async fetchSubCategories(i){try{const{data:a}=await r.get(`/categories/${i}/sub/categories`);return a.ok&&(this.subCategories=a.categories),a}catch(a){console.log(a)}},async onDelete(i){const{value:a}=await g.fire({title:s("Are you sure?"),text:s("You will not be able to recover this customer!"),icon:"warning",showCancelButton:!0,confirmButtonText:s("Yes, delete it!"),cancelButtonText:s("No, keep it")});if(a)try{const{data:e}=await r.delete(`/dashboard/categories/${i}`);e.ok&&(this.categories=this.categories.filter(t=>t.id!==i)),await o(),n({group:"dashboard",ok:e.ok,title:e.ok?s("Success"):s("Error"),text:e.message},2e3)}catch(e){console.log(e)}}}});export{h as u};
