import{d as $,N as B,b as _,z as U,y as w,c as x,o as i,e as n,f as e,q as p,t as l,l as u,i as f,F as c,k as b,g as a,j as v,O as j,P as N,Q as L,h as V,R as Y}from"./app-4aaa95f7.js";import{_ as F}from"./lodash-ef35d7ba.js";import{u as z}from"./CustomerCategoryStore-cea6d995.js";import{u as A}from"./CountryStore-2b00879a.js";import{u as D}from"./SubSubCategoryStore-6dacdc52.js";const M={class:"flex flex-col lg:flex-row lg:items-start gap-5"},P={class:"w-full lg:w-1/4 flex flex-col gap-5"},R={class:"bg-white rounded shadow divide-y divide-solid"},O={class:"text-xl flex items-center gap-1 p-3 text-gray-700"},T={class:"flex flex-col gap-3 divide-y divide-solid"},q={class:"p-3"},E={for:"country_id",class:"block text-sm mb-2 dark:text-white"},Q={value:"0"},G=["value"],H={class:"p-3"},I={for:"city",class:"block text-sm mb-2 dark:text-white"},J={value:"0"},K=["value"],W={class:"p-3"},X={for:"category_id",class:"block text-sm mb-2 dark:text-white"},Z={value:"",disabled:"",selected:""},ee=["value"],te={key:0,class:"p-3"},se={for:"sub_category_id",class:"block text-sm mb-2 dark:text-white"},oe={value:"",disabled:"",selected:""},re=["value"],ae={key:1,class:"p-3"},le={for:"manufacturing_year",class:"block text-sm mb-2 dark:text-white"},ie={value:"",disabled:"",selected:""},ne=["value"],de={key:2,class:"p-3"},ue={for:"sub_sub_category_id",class:"block text-sm mb-2 dark:text-white"},ce={value:"",disabled:"",selected:""},ge=["value"],fe={class:"p-3"},be={for:"sort_by",class:"block text-sm mb-2 dark:text-white"},ye={value:"latest"},_e={value:"popular"},pe={value:"oldest"},me={class:"p-3"},ve={class:"w-full flex flex-col gap-4 relative overflow-hidden"},he={class:"flex rounded-lg shadow-sm"},ke=["placeholder"],we={class:"flex flex-col divide-y divide-gray-200 ads-list"},xe={key:0,class:"py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},Ce={class:"text-sm text-gray-600 dark:text-gray-400"},Se={class:"font-semibold text-gray-800 dark:text-gray-200"},$e={class:"inline-flex gap-x-2"},Be=["disabled"],Ue=["disabled"],je={key:1,class:"flex items-center justify-center w-full h-full"},Ne=["src"],Le={key:1,class:"relative w-full"},Me=$({__name:"index",setup(Ve){const s=B(),g=z(),m=A(),h=D();_(()=>s.filters.country_id,async o=>{o&&await m.fetchCities(!1,!1,o)},{immediate:!0}),_(()=>s.filters.category,async o=>{o?await g.fetchSubCategories(o):(g.subCategories=[],s.filters.sub_category=null,s.filters.sub_sub_category=null)}),_(()=>s.filters.sub_category,async o=>{o?await h.fetchSubSubCategories(o):(h.subSubCategories=[],s.filters.sub_sub_category=null)}),_(()=>s.filters.sub_sub_category,async o=>{o&&await s.fetch()}),_(()=>s.filters,F.debounce(async()=>{await s.fetch()},100),{immediate:!0,deep:!0}),U(async()=>{s.resetAll({search:"",category:null,sub_category:null,sub_sub_category:null,user_id:null,sortBy:"latest",pagination:1,manufacturing_year:null}),await m.fetchCountries(),await g.fetch()});const C=()=>{s.resetAll({search:"",category:null,sub_category:null,sub_sub_category:null,country_id:0,city_id:0,user_id:null,sortBy:"latest",pagination:1,manufacturing_year:null})},k=w(()=>{const o=g.categories.find(r=>r.id==s.filters.category);return o?o.name:null}),S=w(()=>{const o=new Date().getFullYear(),r=1900,d=[];for(let y=o;y>=r;y--)d.push(y);return d});return(o,r)=>{const d=x("v-select"),y=x("v-skeleton");return i(),n("div",M,[e("div",P,[e("aside",R,[e("h3",O,[r[10]||(r[10]=e("i",{class:"icon mgc_filter_2_fill"},null,-1)),p(" "+l(o.$t("Sort by")),1)]),e("div",T,[e("div",q,[e("label",E,l(o.$t("Country")),1),u(d,{id:"country_id",name:"country_id",value:a(s).filters.country_id,"onUpdate:value":r[0]||(r[0]=t=>a(s).filters.country_id=t)},{default:f(()=>[e("option",Q,l(o.$t("Select Country")),1),(i(!0),n(c,null,b(a(m).countries,t=>(i(),n("option",{key:t.id,value:t.id}," @"+l(t.name),9,G))),128))]),_:1},8,["value"])]),e("div",H,[e("label",I,l(o.$t("City")),1),u(d,{id:"city",name:"city_id",value:a(s).filters.city_id,"onUpdate:value":r[1]||(r[1]=t=>a(s).filters.city_id=t)},{default:f(()=>[e("option",J,l(o.$t("Select City")),1),(i(!0),n(c,null,b(a(m).cities,t=>(i(),n("option",{key:t.id,value:t.id}," @"+l(t.name),9,K))),128))]),_:1},8,["value"])]),e("div",W,[e("label",X,l(o.$t("Category")),1),u(d,{id:"category_id",value:a(s).filters.category,"onUpdate:value":r[2]||(r[2]=t=>a(s).filters.category=t)},{default:f(()=>[e("option",Z,l(o.$t("Select Category")),1),(i(!0),n(c,null,b(a(g).categories,t=>(i(),n("option",{key:t.id,value:t.id}," @"+l(t.name),9,ee))),128))]),_:1},8,["value"])]),a(g).isLoading?v("",!0):(i(),n("div",te,[e("label",se,l(o.$t("Sub Category")),1),u(d,{id:"sub_category_id",value:a(s).filters.sub_category,"onUpdate:value":r[3]||(r[3]=t=>a(s).filters.sub_category=t)},{default:f(()=>[e("option",oe,l(o.$t("Select Sub Category")),1),(i(!0),n(c,null,b(a(g).subCategories,t=>(i(),n("option",{key:t.id,value:t.id}," @"+l(t.name),9,re))),128))]),_:1},8,["value"])])),k.value==="Vehicule"||k.value==="سيارات"?(i(),n("div",ae,[e("label",le,l(o.$t("Manufacturing Year")),1),u(d,{id:"manufacturing_year",value:a(s).filters.manufacturing_year,"onUpdate:value":r[4]||(r[4]=t=>a(s).filters.manufacturing_year=t)},{default:f(()=>[e("option",ie,l(o.$t("Select Year")),1),(i(!0),n(c,null,b(S.value,t=>(i(),n("option",{key:t,value:t}," @"+l(t),9,ne))),128))]),_:1},8,["value"])])):v("",!0),!a(g).isLoading&&a(s).filters.sub_category?(i(),n("div",de,[e("label",ue,l(o.$t("Sub Sub Category")),1),u(d,{id:"sub_sub_category_id",value:a(s).filters.sub_sub_category,"onUpdate:value":r[5]||(r[5]=t=>a(s).filters.sub_sub_category=t)},{default:f(()=>[e("option",ce,l(o.$t("Select Sub Sub Category")),1),(i(!0),n(c,null,b(a(h).subSubCategories,t=>(i(),n("option",{key:t.id,value:t.id}," @"+l(t.name),9,ge))),128))]),_:1},8,["value"])])):v("",!0),e("div",fe,[e("label",be,l(o.$t("Sort By")),1),u(d,{id:"sort_by",value:a(s).filters.sortBy,"onUpdate:value":r[6]||(r[6]=t=>a(s).filters.sortBy=t)},{default:f(()=>[e("option",ye,l(o.$t("Latest")),1),e("option",_e,l(o.$t("Popular")),1),e("option",pe,l(o.$t("Oldest")),1)]),_:1},8,["value"])]),e("div",me,[e("button",{onClick:C,type:"button",class:"w-full py-2 px-3 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[r[11]||(r[11]=e("i",{class:"icon mgc_refresh_line"},null,-1)),p(" "+l(o.$t("Reset Filters")),1)])])])])]),e("div",ve,[u(j),e("div",null,[r[13]||(r[13]=e("label",{for:"search_ads",class:"sr-only"},"Label",-1)),e("div",he,[N(e("input",{class:"py-3 px-4 block w-full border-gray-200 shadow-sm rounded-s-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600",name:"search_ads",id:"search_ads",type:"text",placeholder:o.$t("Search for ads"),"onUpdate:modelValue":r[7]||(r[7]=t=>a(s).filters.search=t)},null,8,ke),[[L,a(s).filters.search]]),r[12]||(r[12]=e("button",{type:"button",class:"w-[2.875rem] h-[2.875rem] flex-shrink-0 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-e-md border border-transparent bg-[#0C74BB] text-white hover:bg-[#0C74CC]"},[e("svg",{class:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.3-4.3"})])],-1))])]),a(s).isLoading?(i(),n("div",Le,[u(y,{"loop-number":12})])):(i(),n(c,{key:0},[typeof a(s).advertisements<"u"&&a(s).advertisements.length?(i(),n(c,{key:0},[e("div",we,[(i(!0),n(c,null,b(a(s).advertisements,t=>(i(),V(Y,{key:t.id,advertisement:t},null,8,["advertisement"]))),128))]),a(s).isLoading?v("",!0):(i(),n("div",xe,[e("div",null,[e("p",Ce,[e("span",Se,l(a(s).pagination.total),1),p(" "+l(o.$t("Results")),1)])]),e("div",null,[e("div",$e,[e("button",{onClick:r[8]||(r[8]=t=>a(s).fetch(!0,!0)),disabled:a(s).pagination.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[r[14]||(r[14]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),p(" "+l(o.$t("Previous")),1)],8,Be),e("button",{onClick:r[9]||(r[9]=t=>a(s).fetch(!0)),disabled:a(s).pagination.current_page===a(s).pagination.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[p(l(o.$t("Next"))+" ",1),r[15]||(r[15]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,Ue)])])]))],64)):(i(),n("div",je,[e("img",{src:`${o.$assetUrl}/empty-trash.svg`,alt:"No advertisements found",class:"w-1/2 h-1/2"},null,8,Ne)]))],64))])])}}});export{Me as default};
