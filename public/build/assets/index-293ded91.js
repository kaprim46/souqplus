import{_ as D}from"./lodash-ef35d7ba.js";import{d as R,r as m,x as S,b as T,v as V,c as v,o as i,e as _,f as e,q as l,t as a,l as p,i as x,g as w,F as E,k as F,h as f,j as $,B,D as C,C as u,S as q}from"./app-4aaa95f7.js";const L={class:"flex flex-col"},M={class:"-m-1.5 overflow-x-auto"},P={class:"p-1.5 min-w-full"},U={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700"},Y={class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700"},z={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},G={class:"text-sm text-gray-600 dark:text-gray-400"},H={class:"flex flex-col md:flex-row gap-2"},I={class:"relative overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"bg-gray-50 dark:bg-slate-800 rtl:text-right ltr:text-left"},O={scope:"col",class:"px-6 py-2"},Q={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},W={scope:"col",class:"px-6 py-2"},X={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},Z={scope:"col",class:"px-6 py-2"},ee={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},te={scope:"col",class:"px-6 py-2"},se={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},oe={class:"divide-y divide-gray-200 dark:divide-gray-700"},ae={class:"h-px px-6 py-2"},re={class:"flex items-center gap-x-3"},ne=["src","alt"],le={class:"grow"},ie={class:"flex items-center gap-1"},de={class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},ce={key:0,class:"w-[20px] h-[20px] bg-blue-500 rounded-full flex items-center justify-center text-white"},pe={class:"block text-sm text-gray-500"},ue={class:"h-px px-6 py-2"},ge=["href"],_e={class:"h-px px-6 py-2"},xe={class:"h-px px-6 py-2"},ye={class:"h-px px-6 py-2"},he={class:"h-px px-6 py-2"},me={class:"flex justify-end gap-x-2"},ve={key:1},fe={colspan:"6"},ke={class:"flex items-center justify-center p-4"},be={class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},we={class:"text-sm text-gray-600 dark:text-gray-400"},$e={class:"font-semibold text-gray-800 dark:text-gray-200"},Ce={class:"inline-flex gap-x-2"},Be=["disabled"],je=["disabled"],Re=R({__name:"index",setup(Ae){const y=m([]),d=m({current_page:1,last_page:1,per_page:1,total:1}),c=m({search:"",orderBy:""}),g=m(!1),j=S("$swal"),h=async(s=!1,t=!1)=>{g.value=!0;let n={};c.value.search&&(n.search=c.value.search),c.value.orderBy&&(n.order_by=c.value.orderBy),s&&(t?d.value.current_page--:d.value.current_page++);try{const{data:r}=await axios.get(`/dashboard/customers?page=${d.value.current_page}`,{params:{...n}});r.ok&&(y.value=r.customers.data,d.value={current_page:r.customers.current_page,last_page:r.customers.last_page,per_page:r.customers.per_page,total:r.customers.total}),await B(),g.value=!1}catch{g.value=!1}},A=async s=>{const{value:t}=await j.fire({title:u("Are you sure?"),text:u("You will not be able to recover this customer!"),icon:"warning",showCancelButton:!0,confirmButtonText:u("Yes, delete it!"),cancelButtonText:u("No, keep it")});if(t)try{const{data:n}=await axios.delete(`/dashboard/customers/${s}`);n.ok&&(y.value=y.value.filter(r=>r.id!==s)),await B(),q({group:"dashboard",title:n.ok?u("Success"):u("Error"),text:n.message},2e3)}catch(n){console.log(n)}};return T(c.value,D.debounce(async()=>{console.log("watching"),await h()},500)),V(async()=>{await h()}),(s,t)=>{const n=v("v-input"),r=v("v-button"),k=v("v-badge"),N=v("v-loader");return i(),_("div",L,[e("div",M,[e("div",P,[e("div",U,[e("div",Y,[e("div",null,[e("h2",z,[t[4]||(t[4]=e("i",{class:"icon mgc_group_line"},null,-1)),l(" "+a(s.$t("Customers")),1)]),e("p",G,a(s.$t("Manage your customers")),1)]),e("div",H,[p(n,{placeholder:s.$t("Search"),"onUpdate:input":t[0]||(t[0]=o=>c.value.search=o)},null,8,["placeholder"]),p(r,{color:"green",class:"whitespace-nowrap",onClick:t[1]||(t[1]=o=>w(C).push({name:"customer.create"}))},{default:x(()=>[t[5]||(t[5]=e("i",{class:"icon mgc_add_circle_fill"},null,-1)),l(" "+a(s.$t("Create new customer")),1)]),_:1})])]),e("div",I,[e("table",J,[e("thead",K,[e("tr",null,[e("th",O,[e("span",Q,a(s.$t("Full name")),1)]),e("th",W,[e("span",X,a(s.$t("Phone")),1)]),e("th",Z,[e("span",ee,a(s.$t("Role")),1)]),e("th",te,[e("span",se,a(s.$t("Advertisements")),1)]),t[6]||(t[6]=e("th",{scope:"col",class:"px-6 py-2"},null,-1)),t[7]||(t[7]=e("th",{scope:"col",class:"px-6 py-2"},null,-1))])]),e("tbody",oe,[g.value?(i(),_("tr",ve,[e("td",fe,[e("div",ke,[g.value?(i(),f(N,{key:0,size:4,dark:!0})):$("",!0)])])])):(i(!0),_(E,{key:0},F(y.value,o=>(i(),_("tr",{key:o.id},[e("td",ae,[e("div",re,[e("img",{class:"inline-block h-[2.375rem] w-[2.375rem] rounded-full object-cover",src:`${s.$assetUrl}/avatar.svg`,alt:o.name},null,8,ne),e("div",le,[e("span",ie,[e("span",de,a(o.name),1),o.is_verified?(i(),_("span",ce,[...t[8]||(t[8]=[e("i",{class:"icon mgc_check_2_fill"},null,-1)])])):$("",!0)]),e("span",pe,a(o.email),1)])])]),e("td",ue,[e("a",{href:`tel:${o.country_code}${o.phone_number}`,dir:"ltr",class:"whitespace-nowrap cursor-pointer px-6 py-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[t[9]||(t[9]=e("i",{class:"icon mgc_phone_line"},null,-1)),l(" ("+a(o.country_code)+") "+a(o.phone_number),1)],8,ge)]),e("td",_e,[p(k,{color:o.role==="admin"?"purple":o.role==="customer"?"blue":"green",text:`${o.role==="admin"?"<i class='icon mgc_user_star_line text-xl'></i>":"<i class='icon mgc_user_1_line text-xl'></i>"} ${o.role==="admin"?s.$t("Admin"):o.role==="customer"?s.$t("Customer"):s.$t("Business")}`},null,8,["color","text"])]),e("td",xe,[p(k,{color:"indigo",text:s.$t(":count Advertisements",{count:o.advertisements_count})},null,8,["text"])]),e("td",ye,[o.deleted_at?(i(),f(k,{key:0,color:"red",text:s.$t("Account deleted at :date",{date:o.deleted_at})},null,8,["text"])):$("",!0)]),e("td",he,[e("div",me,[p(r,{color:"indigo",class:"whitespace-nowrap",onClick:b=>w(C).push({name:"advertisements.index",query:{user_id:o.id}})},{default:x(()=>[t[10]||(t[10]=e("i",{class:"icon mgc_list_check_2_fill"},null,-1)),l(" "+a(s.$t("Ads list")),1)]),_:1},8,["onClick"]),p(r,{color:"blue",class:"whitespace-nowrap",onClick:b=>w(C).push({name:"customer.edit",params:{id:o.id}})},{default:x(()=>[t[11]||(t[11]=e("i",{class:"icon mgc_edit_line"},null,-1)),l(" "+a(s.$t("Edit")),1)]),_:1},8,["onClick"]),o.deleted_at?(i(),f(r,{key:1,color:"green",class:"whitespace-nowrap",onClick:b=>s.onRestore(o.id)},{default:x(()=>[t[13]||(t[13]=e("i",{class:"icon mgc_restore_line"},null,-1)),l(" "+a(s.$t("Restore")),1)]),_:1},8,["onClick"])):(i(),f(r,{key:0,color:"red",class:"whitespace-nowrap",onClick:b=>A(o.id)},{default:x(()=>[t[12]||(t[12]=e("i",{class:"icon mgc_delete_line"},null,-1)),l(" "+a(s.$t("Delete")),1)]),_:1},8,["onClick"]))])])]))),128))])])]),e("div",be,[e("div",null,[e("p",we,[e("span",$e,a(d.value.total),1),l(" "+a(s.$t("Results")),1)])]),e("div",null,[e("div",Ce,[e("button",{onClick:t[2]||(t[2]=o=>h(!0,!0)),disabled:d.value.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[t[14]||(t[14]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),l(" "+a(s.$t("Previous")),1)],8,Be),e("button",{onClick:t[3]||(t[3]=o=>h(!0)),disabled:d.value.current_page===d.value.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[l(a(s.$t("Next"))+" ",1),t[15]||(t[15]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,je)])])])])])])])}}});export{Re as default};
