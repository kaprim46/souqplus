import{d as B,r as C,z as E,B as h,c as x,o as n,e as i,f as t,t as a,l as d,j as u,i as w,q as y,F as T,k as j,g as V,n as q,s as N,S as F,w as k}from"./app-4aaa95f7.js";import{s as O}from"./Category-ccc6bb69.js";import{u as z}from"./FilterStore-fc34adbf.js";const K={class:"grid gap-4 grid-cols-1 md:grid-cols-2"},A={for:"name",class:"block text-sm mb-2 dark:text-white"},L={key:0,class:"text-xs text-red-600 mt-2"},R={for:"status",class:"block text-sm mb-2 dark:text-white"},G={value:"active"},H={value:"inactive"},J={key:0,class:"text-xs text-red-600 mt-2"},P={for:"description",class:"block text-sm mb-2 dark:text-white"},Q={key:0,class:"text-xs text-red-600 mt-2"},W={class:"text-2xl font-bold dark:text-white col-span-1 md:col-span-2"},X={for:"meta_title",class:"block text-sm mb-2 dark:text-white"},Y={key:0,class:"text-xs text-red-600 mt-2"},Z={for:"meta_robots",class:"block text-sm mb-2 dark:text-white"},ee={value:"index, follow"},te={value:"noindex, follow"},se={value:"index, nofollow"},oe={value:"noindex, nofollow"},ae={key:0,class:"text-xs text-red-600 mt-2"},le={for:"meta_description",class:"block text-sm mb-2 dark:text-white"},re={key:0,class:"text-xs text-red-600 mt-2"},ne={for:"meta_keywords",class:"block text-sm mb-2 dark:text-white"},ie={key:0,class:"text-xs text-red-600 mt-2"},de={class:"text-2xl font-bold dark:text-white col-span-1 md:col-span-2"},ue={class:"flex flex-wrap gap-4"},ce=["onChange","checked"],me={class:"font-semibold text-base"},pe={class:"col-span-1 md:col-span-2"},ve={class:"flex justify-end"},_e=B({__name:"DataForm",props:{formData:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form","update:errors"],setup(r,{emit:U}){const o=C(r.formData),c=U,p=C(!1),b=z(),M=e=>{var v,f,m;const s=(v=o.value.filters)==null?void 0:v.findIndex(_=>_===e.id);if(s!==-1)return(f=o.value.filters)==null?void 0:f.splice(s,1);(m=o.value.filters)==null||m.push(e.id)},S=async()=>{p.value=!0,await h();try{const{data:e}=await N.post("/dashboard/categories",o.value);e.ok&&c("update:form",{name:"",description:"",status:O.active,meta_title:"",meta_description:"",meta_keywords:"",meta_robots:""}),c("update:errors",{}),F({group:"dashboard",ok:e.ok,title:e.ok?k("Success"):k("Error"),text:e.message},2e3)}catch(e){console.log(e.response.status,e.response.data.errors),e.response.status===422&&c("update:errors",e.response.data.errors)}finally{p.value=!1}},D=async()=>{if(o.value.id){p.value=!0,await h();try{const{data:e}=await N.put(`/dashboard/categories/${o.value.id}`,o.value);e.ok&&c("update:form",e.category),c("update:errors",{}),F({group:"dashboard",ok:e.ok,title:e.ok?k("Success"):k("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&c("update:errors",e.response.data.errors)}finally{p.value=!1}}};return E(async()=>{b.filters.pagination=0,await h(async()=>b.fetchFilters())}),(e,s)=>{const v=x("v-input"),f=x("v-select"),m=x("v-textarea"),_=x("v-button");return n(),i("div",K,[t("div",null,[t("label",A,a(e.$t("Name")),1),d(v,{type:"text",id:"name",value:o.value.name,placeholder:e.$t("Name"),"onUpdate:input":s[0]||(s[0]=l=>o.value.name=l)},null,8,["value","placeholder"]),r.errors.name?(n(),i("p",L," @"+a(r.errors.name[0]),1)):u("",!0)]),t("div",null,[t("label",R,a(e.$t("Status")),1),d(f,{id:"status",value:o.value.status,"onUpdate:value":s[1]||(s[1]=l=>o.value.status=l)},{default:w(()=>[t("option",G,a(e.$t("Active")),1),t("option",H,a(e.$t("Inactive")),1)]),_:1},8,["value"]),r.errors.status?(n(),i("p",J," @"+a(r.errors.status[0]),1)):u("",!0)]),t("div",null,[t("label",P,a(e.$t("Description")),1),d(m,{id:"description",value:o.value.description,"onUpdate:input":s[2]||(s[2]=l=>o.value.description=l)},null,8,["value"]),r.errors.description?(n(),i("p",Q," @"+a(r.errors.description[0]),1)):u("",!0)]),s[10]||(s[10]=t("hr",{class:"col-span-1 md:col-span-2"},null,-1)),t("h3",W,[s[8]||(s[8]=t("i",{class:"icon mgc_layout_top_fill"},null,-1)),y(" "+a(e.$t("SEO")),1)]),t("div",null,[t("label",X,a(e.$t("Meta Title")),1),d(v,{type:"text",id:"meta_title",value:o.value.meta_title,placeholder:e.$t("Meta Title"),"onUpdate:input":s[3]||(s[3]=l=>o.value.meta_title=l)},null,8,["value","placeholder"]),r.errors.meta_title?(n(),i("p",Y," @"+a(r.errors.meta_title[0]),1)):u("",!0)]),t("div",null,[t("label",Z,a(e.$t("Meta Robots")),1),d(f,{id:"meta_robots",value:o.value.meta_robots,"onUpdate:value":s[4]||(s[4]=l=>o.value.meta_robots=l)},{default:w(()=>[t("option",ee,a(e.$t("Index, Follow")),1),t("option",te,a(e.$t("Noindex, Follow")),1),t("option",se,a(e.$t("Index, Nofollow")),1),t("option",oe,a(e.$t("Noindex, Nofollow")),1)]),_:1},8,["value"]),r.errors.meta_robots?(n(),i("p",ae," @"+a(r.errors.meta_robots[0]),1)):u("",!0)]),t("div",null,[t("label",le,a(e.$t("Meta Description")),1),d(m,{id:"meta_description",value:o.value.meta_description,placeholder:e.$t("Meta Description"),"onUpdate:input":s[5]||(s[5]=l=>o.value.meta_description=l)},null,8,["value","placeholder"]),r.errors.meta_description?(n(),i("p",re," @"+a(r.errors.meta_description[0]),1)):u("",!0)]),t("div",null,[t("label",ne,a(e.$t("Meta Keywords")),1),d(m,{id:"meta_keywords",value:o.value.meta_keywords,placeholder:e.$t("Meta Keywords"),"onUpdate:input":s[6]||(s[6]=l=>o.value.meta_keywords=l)},null,8,["value","placeholder"]),r.errors.meta_keywords?(n(),i("p",ie," @"+a(r.errors.meta_keywords[0]),1)):u("",!0)]),s[11]||(s[11]=t("hr",{class:"col-span-1 md:col-span-2"},null,-1)),t("h3",de,[s[9]||(s[9]=t("i",{class:"icon mgc_filter_2_fill"},null,-1)),y(" "+a(e.$t("Filters")),1)]),t("div",ue,[(n(!0),i(T,null,j(V(b).data_filters,(l,I)=>{var g;return n(),i("label",{key:I,class:"flex items-center gap-1"},[t("input",{type:"checkbox",class:"form-checkbox",onChange:$=>M(l),checked:((g=o.value.filters)==null?void 0:g.findIndex($=>$===l.id))!==-1},null,40,ce),t("span",me,a(l.name),1)])}),128))]),t("div",pe,[t("div",ve,[d(_,{type:"submit",color:"green",loading:p.value,onClick:s[7]||(s[7]=l=>o.value.id?D():S())},{default:w(()=>[t("i",{class:q(o.value.id?"icon mgc_edit_line":"icon mgc_add_line")},null,2),y(" "+a(o.value.id?e.$t("Update"):e.$t("Create")),1)]),_:1},8,["loading"])])])])}}});export{_e as _};
