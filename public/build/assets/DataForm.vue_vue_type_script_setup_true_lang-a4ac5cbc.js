import{d as N,r as P,c as v,o as l,e as d,f as o,t as s,l as n,j as i,i as w,q as h,n as B,B as k,S as y,w as p}from"./app-4aaa95f7.js";const E={class:"grid gap-4 grid-cols-1 md:grid-cols-2"},V={for:"name",class:"block text-sm mb-2 dark:text-white"},j={key:0,class:"text-xs text-red-600 mt-2",id:"name-error"},S={for:"email",class:"block text-sm mb-2 dark:text-white"},q={key:0,class:"text-xs text-red-600 mt-2",id:"email-error"},A={for:"phone_number",class:"block text-sm mb-2 dark:text-white"},F={key:0,class:"text-xs text-red-600 mt-2",id:"phone-error"},I={for:"is_verified",class:"block text-sm mb-2 dark:text-white"},T={value:"1"},D={value:"0"},O={key:0,class:"text-xs text-red-600 mt-2",id:"is_verified-error"},z={for:"role",class:"block text-sm mb-2 dark:text-white"},R={value:"customer"},Y={value:"business"},G={value:"admin"},H={key:0,class:"text-xs text-red-600 mt-2",id:"role-error"},J={class:"text-xl font-semibold text-gray-800 dark:text-gray-200 col-span-1 md:col-span-2"},K={key:0},L={for:"current-password",class:"block text-sm mb-2 dark:text-white"},M={key:0,class:"text-xs text-red-600 mt-2",id:"current-password-error"},Q={for:"password",class:"block text-sm mb-2 dark:text-white"},W={key:0,class:"text-xs text-red-600 mt-2",id:"password-error"},X={for:"confirm-password",class:"block text-sm mb-2 dark:text-white"},Z={class:"col-span-1 md:col-span-2"},_={class:"flex justify-end"},te=N({__name:"DataForm",props:{form:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form","update:errors"],setup(t,{emit:x}){const m=P(!1),f=t,u=x,$=async()=>{m.value=!0,await k();try{const{data:e}=await axios.post("/dashboard/customers",f.form);e.ok&&u("update:form",{role:"customer",name:"",email:"",password:"",confirm_password:"",country_code:"",phone_number:""}),u("update:errors",{}),y({group:"dashboard",ok:e.ok,title:e.ok?p("Success"):p("Error"),text:e.message},2e3)}catch(e){console.log(e.response.status,e.response.data.errors),e.response.status===422&&u("update:errors",e.response.data.errors)}finally{m.value=!1}},g=async()=>{if(f.form.id){m.value=!0,await k();try{const{data:e}=await axios.put(`/dashboard/customers/${f.form.id}`,f.form);e.ok&&u("update:form",e.customer),u("update:errors",{}),y({group:"dashboard",ok:e.ok,title:e.ok?p("Success"):p("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&u("update:errors",e.response.data.errors)}finally{m.value=!1}}};return(e,r)=>{const c=v("v-input"),C=v("v-phoneInput"),b=v("v-select"),U=v("v-button");return l(),d("div",E,[o("div",null,[o("label",V,s(e.$t("Full Name")),1),n(c,{type:"text",id:"name",value:t.form.name,placeholder:e.$t("Full Name"),"onUpdate:input":r[0]||(r[0]=a=>t.form.name=a)},null,8,["value","placeholder"]),t.errors.name?(l(),d("p",j," @"+s(t.errors.name[0]),1)):i("",!0)]),o("div",null,[o("label",S,s(e.$t("Email Address")),1),n(c,{type:"email",id:"email",value:t.form.email,placeholder:e.$t("Email Address"),"onUpdate:input":r[1]||(r[1]=a=>t.form.email=a)},null,8,["value","placeholder"]),t.errors.email?(l(),d("p",q," @"+s(t.errors.email[0]),1)):i("",!0)]),o("div",null,[o("label",A,s(e.$t("Phone Number")),1),n(C,{"onUpdate:phoneNumber":r[2]||(r[2]=a=>t.form.phone_number=a),"onUpdate:countryCode":r[3]||(r[3]=a=>t.form.country_code=a),value:t.form.phone_number,valueCountryCode:t.form.country_code??"+212",id:"phone_number"},null,8,["value","valueCountryCode"]),t.errors.phone_number?(l(),d("p",F," @"+s(t.errors.phone_number[0]),1)):i("",!0)]),o("div",null,[o("label",I,s(e.$t("Is Verified")),1),n(b,{id:"is_verified",name:"is_verified",value:t.form.is_verified===!0?"1":"0","onUpdate:value":r[4]||(r[4]=a=>t.form.is_verified=a)},{default:w(()=>[o("option",T,s(e.$t("Yes")),1),o("option",D,s(e.$t("No")),1)]),_:1},8,["value"]),t.errors.is_verified?(l(),d("p",O," @"+s(t.errors.is_verified[0]),1)):i("",!0)]),o("div",null,[o("label",z,s(e.$t("Role")),1),n(b,{id:"role",value:t.form.role,"onUpdate:value":r[5]||(r[5]=a=>t.form.role=a)},{default:w(()=>[o("option",R,s(e.$t("Customer")),1),o("option",Y,s(e.$t("Business")),1),o("option",G,s(e.$t("Admin")),1)]),_:1},8,["value"]),t.errors.role?(l(),d("p",H," @"+s(t.errors.role[0]),1)):i("",!0)]),r[11]||(r[11]=o("hr",{class:"col-span-1 md:col-span-2"},null,-1)),o("h1",J,[r[10]||(r[10]=o("i",{class:"icon mgc_lock_line"},null,-1)),h(" "+s(e.$t("Password")),1)]),t.form.id?(l(),d("div",K,[o("label",L,s(e.$t("Current Password")),1),n(c,{type:"password",id:"current-password",value:t.form.current_password,placeholder:e.$t("Current Password"),"onUpdate:input":r[6]||(r[6]=a=>t.form.current_password=a)},null,8,["value","placeholder"]),t.errors.current_password?(l(),d("p",M," @"+s(t.errors.current_password[0]),1)):i("",!0)])):i("",!0),o("div",null,[o("label",Q,s(e.$t("Password")),1),n(c,{type:"password",id:"password",value:t.form.password,placeholder:e.$t("Password"),"onUpdate:input":r[7]||(r[7]=a=>t.form.password=a)},null,8,["value","placeholder"]),t.errors.password?(l(),d("p",W," @"+s(t.errors.password[0]),1)):i("",!0)]),o("div",null,[o("label",X,s(e.$t("Confirm Password")),1),n(c,{type:"password",id:"confirm-password",value:t.form.confirm_password,placeholder:e.$t("Confirm Password"),"onUpdate:input":r[8]||(r[8]=a=>t.form.confirm_password=a)},null,8,["value","placeholder"])]),o("div",Z,[o("div",_,[n(U,{type:"submit",color:"green",loading:m.value,onClick:r[9]||(r[9]=a=>t.form.id?g():$())},{default:w(()=>[o("i",{class:B(t.form.id?"icon mgc_edit_line":"icon mgc_add_line")},null,2),h(" "+s(t.form.id?e.$t("Update"):e.$t("Create")),1)]),_:1},8,["loading"])])])])}}});export{te as _};
