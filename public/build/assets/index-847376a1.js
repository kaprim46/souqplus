import{d as V,m as Y,N as F,r as U,y as C,b as x,z as M,v as D,c as z,o as a,e as n,f as e,q as b,t as i,g as l,l as c,i as g,j as v,U as I,F as _,k as f,P,Q as R,h as T,R as q,_ as O}from"./app-4aaa95f7.js";import{u as Q}from"./SliderStore-974c89d3.js";import{u as G}from"./CustomerCategoryStore-cea6d995.js";import{u as H}from"./CountryStore-2b00879a.js";import{l as J}from"./lodash-ef35d7ba.js";import{u as K}from"./SubSubCategoryStore-6dacdc52.js";const W={class:"mt-10"},X={class:"mb-10"},Z={class:"text-3xl font-bold flex items-center gap-2"},ee={key:0,class:"relative mb-10"},te={class:"nz-slider bg-red-500 relative overflow-hidden w-full min-h-80 rounded-[10px]"},se={class:"nz-slider-slide"},oe=["src"],re={key:0,class:"absolute bottom-0 start-0 end-0 p-4 bg-gradient-to-t from-black to-transparent"},le={class:"text-2xl font-bold text-white"},ie={class:"text-white"},ae={class:"flex flex-col lg:flex-row lg:items-start gap-5"},ne={class:"bg-white w-full lg:w-1/4 rounded shadow divide-y divide-solid"},de={class:"flex items-center justify-between p-3"},ue={class:"text-xl flex items-center gap-1 text-gray-700"},ce={class:"flex flex-col gap-3 divide-y divide-solid"},_e={class:"p-3"},ge={for:"country_id",class:"block text-sm mb-2 dark:text-white"},fe={value:"0"},ye=["value"],be={class:"p-3"},ve={for:"city",class:"block text-sm mb-2 dark:text-white"},me={value:"0"},pe=["value"],he={class:"p-3"},xe={for:"category_id",class:"block text-sm mb-2 dark:text-white"},ke={value:"",disabled:"",selected:""},we=["value"],Ce={key:0,class:"p-3"},Se={for:"manufacturing_year",class:"block text-sm mb-2 dark:text-white"},$e={value:"",disabled:"",selected:""},Be=["value"],je={key:1,class:"p-3"},Ue={for:"sub_category_id",class:"block text-sm mb-2 dark:text-white"},ze={value:"",disabled:"",selected:""},Ae=["value"],Le={key:2,class:"p-3"},Ne={for:"sub_sub_category_id",class:"block text-sm mb-2 dark:text-white"},Ee={value:"",disabled:"",selected:""},Ve=["value"],Ye={class:"p-3"},Fe={for:"sort_by",class:"block text-sm mb-2 dark:text-white"},Me={value:"latest"},De={value:"popular"},Ie={value:"oldest"},Pe={class:"w-full flex flex-col gap-4 relative overflow-hidden"},Re={class:"flex rounded-lg shadow-sm"},Te=["placeholder"],qe={class:"flex flex-col divide-y divide-gray-200 ads-list"},Oe={key:0,class:"py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},Qe={class:"text-sm text-gray-600 dark:text-gray-400"},Ge={class:"font-semibold text-gray-800 dark:text-gray-200"},He={class:"inline-flex gap-x-2"},Je=["disabled"],Ke=["disabled"],We={key:1,class:"flex items-center justify-center w-full h-full"},Xe=["src"],Ze={key:1,class:"relative w-full"},et=V({__name:"index",setup(tt){const u=G();Y();const k=H(),t=F(),S=K(),m=Q(),y=U(0),w=U(null),p=C(()=>m.sliders[y.value]??{});C(()=>{const s=u.categories.find(o=>o.id==t.filters.category);return s&&(s.name&&s.name.toLowerCase().includes("vehicule")||s.name==="سيارات")});const $=C(()=>{const s=u.categories.find(o=>o.id==t.filters.category);return s?s.name:null}),A=C(()=>{const s=new Date().getFullYear(),o=1900,d=[];for(let h=s;h>=o;h--)d.push(h);return d}),B=()=>{y.value=(y.value+1)%m.sliders.length},L=()=>{y.value=(y.value-1+m.sliders.length)%m.sliders.length},j=()=>{w.value=setInterval(()=>{B()},5e3)},N=()=>{w.value&&(clearInterval(w.value),w.value=null)},E=()=>{t.resetAll({pagination:1,search:"",category:null,sub_category:null,sub_sub_category:null,sortBy:"latest",country_id:null,city_id:null,manufacturing_year:null}),t.fetchExploreAdvertisements()};return x(()=>({search:t.filters.search,category:t.filters.category,sub_category:t.filters.sub_category,sub_sub_category:t.filters.sub_sub_category,country_id:t.filters.country_id,city_id:t.filters.city_id,sortBy:t.filters.sortBy,manufacturing_year:t.filters.manufacturing_year}),J.debounce(async()=>{await t.fetchExploreAdvertisements()},300),{deep:!0}),x(()=>t.filters.country_id,async s=>{s?await k.fetchCities(!1,!1,s):t.filters.city_id=null},{immediate:!0}),x(()=>t.filters.category,async s=>{s?(await u.fetchSubCategories(s),t.filters.sub_category=null):(u.subCategories=[],t.filters.sub_category=null)},{immediate:!0}),x(()=>t.filters.sub_category,async s=>{s?(await S.fetchSubSubCategories(s),t.filters.sub_sub_category=null):(S.subSubCategories=[],t.filters.sub_sub_category=null)},{immediate:!0}),x(()=>y.value,()=>{N(),j()}),M(async()=>{t.resetAll({pagination:1,search:"",category:null,sub_category:null,sub_sub_category:null,country_id:null,city_id:null,sortBy:"latest",manufacturing_year:null}),await k.fetchCountries(),await u.fetch(),await t.fetchExploreAdvertisements()}),D(async()=>{try{j()}catch(s){console.error("Error initializing explore page:",s)}}),(s,o)=>{const d=z("v-select"),h=z("v-skeleton");return a(),n("section",W,[e("div",X,[e("h2",Z,[o[10]||(o[10]=e("i",{class:"icon mgc_world_2_line"},null,-1)),b(" "+i(s.$t("Explore")),1)])]),l(m).sliders.length?(a(),n("div",ee,[e("div",te,[c(I,{name:"slide"},{default:g(()=>[e("div",se,[e("img",{src:p.value.image_url,alt:"Slider",class:"absolute top-0 start-0 w-full h-full object-cover"},null,8,oe),p.value.title||p.value.description?(a(),n("div",re,[e("h2",le,i(p.value.title),1),e("p",ie,i(p.value.description),1)])):v("",!0)])]),_:1})]),e("button",{type:"button",class:"absolute top-0 start-0 flex items-center justify-center rounded-end nz-slider-prev bg-white h-16 w-16 transform translate-y-[200%]",onClick:L},[...o[11]||(o[11]=[e("i",{class:"icon mgc_left_line text-2xl rtl:transform rtl:rotate-180"},null,-1)])]),e("button",{type:"button",class:"absolute top-0 end-0 flex items-center justify-center rounded-start nz-slider-next bg-white h-16 w-16 transform translate-y-[200%]",onClick:B},[...o[12]||(o[12]=[e("i",{class:"icon mgc_right_line text-2xl rtl:transform rtl:rotate-180"},null,-1)])])])):v("",!0),e("div",ae,[e("aside",ne,[e("div",de,[e("h3",ue,[o[13]||(o[13]=e("i",{class:"icon mgc_filter_2_fill"},null,-1)),b(" "+i(s.$t("Sort by")),1)]),e("button",{onClick:E,class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50"},[o[14]||(o[14]=e("i",{class:"icon mgc_refresh_line"},null,-1)),b(" "+i(s.$t("Reset Filters")),1)])]),e("div",ce,[e("div",_e,[e("label",ge,i(s.$t("Country")),1),c(d,{id:"country_id",name:"country_id",value:l(t).filters.country_id,"onUpdate:value":o[0]||(o[0]=r=>l(t).filters.country_id=r)},{default:g(()=>[e("option",fe,i(s.$t("Select Country")),1),(a(!0),n(_,null,f(l(k).countries,r=>(a(),n("option",{key:r.id,value:r.id}," @"+i(r.name),9,ye))),128))]),_:1},8,["value"])]),e("div",be,[e("label",ve,i(s.$t("City")),1),c(d,{id:"city",name:"city_id",value:l(t).filters.city_id,"onUpdate:value":o[1]||(o[1]=r=>l(t).filters.city_id=r)},{default:g(()=>[e("option",me,i(s.$t("Select City")),1),(a(!0),n(_,null,f(l(k).cities,r=>(a(),n("option",{key:r.id,value:r.id}," @"+i(r.name),9,pe))),128))]),_:1},8,["value"])]),e("div",he,[e("label",xe,i(s.$t("Category")),1),c(d,{id:"category_id",value:l(t).filters.category,"onUpdate:value":o[2]||(o[2]=r=>l(t).filters.category=r)},{default:g(()=>[e("option",ke,i(s.$t("Select Category")),1),(a(!0),n(_,null,f(l(u).categories,r=>(a(),n("option",{key:r.id,value:r.id}," @"+i(r.name),9,we))),128))]),_:1},8,["value"])]),$.value==="Vehicule"||$.value==="سيارات"?(a(),n("div",Ce,[e("label",Se,i(s.$t("Manufacturing Year")),1),c(d,{id:"manufacturing_year",value:l(t).filters.manufacturing_year,"onUpdate:value":o[3]||(o[3]=r=>l(t).filters.manufacturing_year=r)},{default:g(()=>[e("option",$e,i(s.$t("Select Year")),1),(a(!0),n(_,null,f(A.value,r=>(a(),n("option",{key:r,value:r}," @"+i(r),9,Be))),128))]),_:1},8,["value"])])):v("",!0),l(u).isLoading?v("",!0):(a(),n("div",je,[e("label",Ue,i(s.$t("Sub Category")),1),c(d,{id:"sub_category_id",value:l(t).filters.sub_category,"onUpdate:value":o[4]||(o[4]=r=>l(t).filters.sub_category=r)},{default:g(()=>[e("option",ze,i(s.$t("Select Sub Category")),1),(a(!0),n(_,null,f(l(u).subCategories,r=>(a(),n("option",{key:r.id,value:r.id}," @"+i(r.name),9,Ae))),128))]),_:1},8,["value"])])),l(u).isLoading?v("",!0):(a(),n("div",Le,[e("label",Ne,i(s.$t("Sub Sub Category")),1),c(d,{id:"sub_sub_category_id",value:l(t).filters.sub_sub_category,"onUpdate:value":o[5]||(o[5]=r=>l(t).filters.sub_sub_category=r)},{default:g(()=>[e("option",Ee,i(s.$t("Select Sub Sub Category")),1),(a(!0),n(_,null,f(l(S).subSubCategories,r=>(a(),n("option",{key:r.id,value:r.id}," @"+i(r.name),9,Ve))),128))]),_:1},8,["value"])])),e("div",Ye,[e("label",Fe,i(s.$t("Sort By")),1),c(d,{id:"sort_by",value:l(t).filters.sortBy,"onUpdate:value":o[6]||(o[6]=r=>l(t).filters.sortBy=r)},{default:g(()=>[e("option",Me,i(s.$t("Latest")),1),e("option",De,i(s.$t("Popular")),1),e("option",Ie,i(s.$t("Oldest")),1)]),_:1},8,["value"])])])]),e("div",Pe,[e("div",null,[o[16]||(o[16]=e("label",{for:"search_ads",class:"sr-only"},"Label",-1)),e("div",Re,[P(e("input",{class:"py-3 px-4 block w-full border-gray-200 shadow-sm rounded-s-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600",name:"search_ads",id:"search_ads",type:"text",placeholder:s.$t("Search for ads"),"onUpdate:modelValue":o[7]||(o[7]=r=>l(t).filters.search=r)},null,8,Te),[[R,l(t).filters.search]]),o[15]||(o[15]=e("button",{type:"button",class:"w-[2.875rem] h-[2.875rem] flex-shrink-0 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-e-md border border-transparent bg-[#0C74BB] text-white hover:bg-[#0C74CC]"},[e("svg",{class:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.3-4.3"})])],-1))])]),l(t).isLoading?(a(),n("div",Ze,[c(h,{"loop-number":12})])):(a(),n(_,{key:0},[typeof l(t).advertisements<"u"&&l(t).advertisements.length?(a(),n(_,{key:0},[e("div",qe,[(a(!0),n(_,null,f(l(t).advertisements,r=>(a(),T(q,{key:r.id,advertisement:r},null,8,["advertisement"]))),128))]),l(t).isLoading?v("",!0):(a(),n("div",Oe,[e("div",null,[e("p",Qe,[e("span",Ge,i(l(t).pagination.total),1),b(" "+i(s.$t("Results")),1)])]),e("div",null,[e("div",He,[e("button",{onClick:o[8]||(o[8]=r=>l(t).fetch(!0,!0)),disabled:l(t).pagination.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[o[17]||(o[17]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),b(" "+i(s.$t("Previous")),1)],8,Je),e("button",{onClick:o[9]||(o[9]=r=>l(t).fetch(!0)),disabled:l(t).pagination.current_page===l(t).pagination.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[b(i(s.$t("Next"))+" ",1),o[18]||(o[18]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,Ke)])])]))],64)):(a(),n("div",We,[e("img",{src:`${s.$assetUrl}/empty-trash.svg`,alt:"No advertisements found",class:"w-1/2 h-1/2"},null,8,Xe)]))],64))])])])}}});const nt=O(et,[["__scopeId","data-v-e20a3e4e"]]);export{nt as default};
