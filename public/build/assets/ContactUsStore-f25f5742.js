import{G as c,s as i,B as n,H as g,C as t,S as o}from"./app-4aaa95f7.js";const h=c({id:"contact-us",state:()=>({messages:[],message:{},pagination:{current_page:1,last_page:1,per_page:1,total:0},isLoading:!0,isReplying:!1,replayErrors:{},sendErrors:{},filters:{}}),getters:{},actions:{async getMessages(s=!1,r=!1){this.isLoading=!0;let e={};this.filters.search&&(e.search=this.filters.search),this.filters.order_by&&(e.order_by=this.filters.order_by),s&&(r?this.pagination.current_page--:this.pagination.current_page++);try{const{data:a}=await i.get(`/dashboard/contact-us?page=${this.pagination.current_page}`,{params:{...e}});a.ok&&(this.messages=a.messages.data,this.pagination={current_page:a.messages.current_page,last_page:a.messages.last_page,per_page:a.messages.per_page,total:a.messages.total}),await n(),this.isLoading=!1}catch{this.isLoading=!1}},async deleteMessage(s){const{value:r}=await g.fire({title:t("Are you sure?"),text:t("You will not be able to recover this customer!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, delete it!"),cancelButtonText:t("No, keep it")});if(r)try{const{data:e}=await i.delete(`/dashboard/contact-us/${s}`);e.ok&&(this.messages=this.messages.filter(a=>a.id!==s)),await n(),o({group:"dashboard",ok:e.ok,title:e.ok?t("Success"):t("Error"),text:e.message},2e3)}catch(e){console.log(e)}},async fetchMessage(s){this.isLoading=!0;try{const{data:r}=await i.get(`/dashboard/contact-us/${s}`);r.ok&&(this.message=r.contactUs)}catch(r){console.log(r)}finally{this.isLoading=!1}},async replyMessage(){this.isReplying=!0;try{const{data:s}=await i.post(`/dashboard/contact-us/${this.message.id}/reply`,{reply:this.message.reply});s.ok&&(this.message=s.contactUs),o({group:"dashboard",ok:s.ok,title:s.ok?t("Success"):t("Error"),text:s.message},2e3)}catch(s){s.response.status===422&&(this.replayErrors=s.response.data.errors)}finally{this.isReplying=!1}},async sendMessage(){this.isReplying=!0;try{const{data:s}=await i.post("/contact-us",{name:this.message.name,email:this.message.email,subject:this.message.subject,message:this.message.message});this.sendErrors={},s.ok&&(this.message={}),o({group:"dashboard",ok:s.ok,title:s.ok?t("Success"):t("Error"),text:s.message},2e3)}catch(s){s.response.status===422&&(this.sendErrors=s.response.data.errors)}finally{this.isReplying=!1}}}});export{h as u};
