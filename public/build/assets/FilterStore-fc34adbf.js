import{G as l,s,B as n,S as o,C as r}from"./app-4aaa95f7.js";const f=l({id:"filter",state:()=>({data_filter:{name:"",type:"",options:{nameField:"",placeholder:"",options:[],from:"",to:""}},data_filters:[],data_filters_category:[],data_filters_sub_category:[],isLoadingAction:!1,filters:{},pagination:{current_page:1,last_page:1,per_page:1,total:0},isLoading:!1,errors:{},any_data:[]}),getters:{setFilterType:t=>a=>{t.data_filter.type=a},setData:t=>a=>{t.data_filter=a}},actions:{async fetchFilters(t=!1,a=!1){this.isLoading=!0;let i={};this.filters.search&&(i.search=this.filters.search),this.filters.pagination&&(i.pagination=1),t&&this.filters.pagination&&(a?this.pagination.current_page--:this.pagination.current_page++,i.page=this.pagination.current_page);try{const{data:e}=await s.get("/dashboard/filters",{params:{...i}});e.ok&&(this.filters.pagination?(this.data_filters=e.data_filters.data,this.pagination={current_page:e.data_filters.current_page,last_page:e.data_filters.last_page,per_page:e.data_filters.per_page,total:e.data_filters.total}):this.data_filters=e.data_filters),await n(),this.isLoading=!1}catch{this.isLoading=!1}},async storeFilter(){this.isLoadingAction=!0;try{const{data:t}=await s.post("/dashboard/filters",this.data_filter);this.errors={},t.ok&&(this.data_filters.push(t.data),this.data_filter={name:"",type:"",options:{nameField:"",placeholder:"",options:[],from:"",to:""}}),o({group:"dashboard",ok:t.ok,title:t.ok?r("Success"):r("Error"),text:t.message},2e3),this.isLoadingAction=!1}catch(t){t.response.status===422&&(this.errors=t.response.data.errors),this.isLoadingAction=!1}},async updateFilter(){if(this.data_filter.id){this.isLoadingAction=!0;try{const{data:t}=await s.put(`/dashboard/filters/${this.data_filter.id}`,{...this.data_filter,_method:"PUT"});this.errors={},o({group:"dashboard",ok:t.ok,title:t.ok?r("Success"):r("Error"),text:t.message},2e3),this.isLoadingAction=!1}catch(t){t.response.status===422&&(this.errors=t.response.data.errors),this.isLoadingAction=!1}}},async getFiltersByCategory(t){this.isLoading=!0;try{const{data:a}=await s.get(`/filters/category/${t}`);a.ok&&(this.data_filters_category=a.filters)}catch(a){console.log(a)}finally{this.isLoading=!1}},async getFiltersBySubCategory(t){this.isLoading=!0;try{const{data:a}=await s.get(`/filters/sub/category/${t}`);a.ok&&(this.data_filters_category=a.filters)}catch(a){console.log(a)}finally{this.isLoading=!1}},resetAll(){this.data_filter={name:"",type:"",options:{nameField:"",placeholder:"",options:[],from:"",to:""}},this.errors={}}}});export{f as u};
