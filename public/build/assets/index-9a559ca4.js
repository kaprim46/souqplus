import{G as C,s as x,B as y,H as S,C as d,S as B,d as L,b as j,v as N,c as u,o as l,e as g,f as e,q as n,t as o,l as p,g as r,i as _,F as D,k as T,h as V,j as b,D as m}from"./app-4aaa95f7.js";import{_ as E}from"./lodash-ef35d7ba.js";const M=C({id:"sub-category",state:()=>({categories:[],pagination:{current_page:1,last_page:1,per_page:1,total:0},isLoading:!0,filters:{search:"",order_by:"",pagination:1}}),getters:{},actions:{async fetch(c=!1,a=!1){this.isLoading=!0;let s={};this.filters.search&&(s.search=this.filters.search),this.filters.order_by&&(s.order_by=this.filters.order_by),this.filters.pagination&&(s.pagination=1),c&&this.filters.pagination&&(a?this.pagination.current_page--:this.pagination.current_page++,s.page=this.pagination.current_page);try{const{data:t}=await x.get("/dashboard/sub/categories",{params:{...s}});t.ok&&(this.filters.pagination?(this.categories=t.categories.data,this.pagination={current_page:t.categories.current_page,last_page:t.categories.last_page,per_page:t.categories.per_page,total:t.categories.total}):this.categories=t.categories),await y(),this.isLoading=!1}catch{this.isLoading=!1}},async onDelete(c){const{value:a}=await S.fire({title:d("Are you sure?"),text:d("You will not be able to recover this customer!"),icon:"warning",showCancelButton:!0,confirmButtonText:d("Yes, delete it!"),cancelButtonText:d("No, keep it")});if(a)try{const{data:s}=await x.delete(`/dashboard/sub/categories/${c}`);s.ok&&(this.categories=this.categories.filter(t=>t.id!==c)),await y(),B({group:"dashboard",ok:s.ok,title:s.ok?d("Success"):d("Error"),text:s.message},2e3)}catch(s){console.log(s)}}}}),A={class:"flex flex-col"},F={class:"-m-1.5 overflow-x-auto"},Y={class:"p-1.5 min-w-full"},q={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700"},z={class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700"},G={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},H={class:"text-sm text-gray-600 dark:text-gray-400"},I={class:"flex flex-col md:flex-row gap-2"},P={class:"relative overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},U={class:"bg-gray-50 dark:bg-slate-800 rtl:text-right ltr:text-left"},J={scope:"col",class:"px-6 py-2"},K={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},O={scope:"col",class:"px-6 py-2"},Q={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},W={scope:"col",class:"px-6 py-2"},X={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},Z={scope:"col",class:"px-6 py-2"},ee={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},te={class:"divide-y divide-gray-200 dark:divide-gray-700"},se={class:"h-px px-6 py-2"},ae={class:"whitespace-nowrap"},oe={class:"h-px px-6 py-2"},ie={class:"whitespace-nowrap"},re={class:"h-px px-6 py-2"},ne={class:"whitespace-nowrap"},de={class:"h-px px-6 py-2"},le={class:"h-px px-6 py-2"},ce={class:"flex justify-end gap-x-2"},ge={key:1},pe={colspan:"6"},ue={class:"flex items-center justify-center p-4"},he={key:0,class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},_e={class:"text-sm text-gray-600 dark:text-gray-400"},fe={class:"font-semibold text-gray-800 dark:text-gray-200"},xe={class:"inline-flex gap-x-2"},ye=["disabled"],be=["disabled"],we=L({__name:"index",setup(c){const a=M();return j(a.filters,E.debounce(async()=>{await a.fetch()},500)),N(async()=>{await a.fetch()}),(s,t)=>{const k=u("v-input"),h=u("v-button"),w=u("v-badge"),v=u("v-loader");return l(),g("div",A,[e("div",F,[e("div",Y,[e("div",q,[e("div",z,[e("div",null,[e("h2",G,[t[4]||(t[4]=e("i",{class:"icon mgc_transfer_fill"},null,-1)),n(" "+o(s.$t("Sub Categories")),1)]),e("p",H,o(s.$t("Manage your sub categories")),1)]),e("div",I,[p(k,{placeholder:s.$t("Search"),"onUpdate:input":t[0]||(t[0]=i=>r(a).filters.search=i)},null,8,["placeholder"]),p(h,{color:"green",class:"whitespace-nowrap",onClick:t[1]||(t[1]=i=>r(m).push({name:"sub-category.create"}))},{default:_(()=>[t[5]||(t[5]=e("i",{class:"icon mgc_add_circle_fill"},null,-1)),n(" "+o(s.$t("Create new sub category")),1)]),_:1})])]),e("div",P,[e("table",R,[e("thead",U,[e("tr",null,[e("th",J,[e("span",K,o(s.$t("Name")),1)]),e("th",O,[e("span",Q,o(s.$t("Main Category")),1)]),e("th",W,[e("span",X,o(s.$t("Description")),1)]),e("th",Z,[e("span",ee,o(s.$t("Status")),1)]),t[6]||(t[6]=e("th",{scope:"col",class:"px-6 py-2"},null,-1))])]),e("tbody",te,[r(a).isLoading?(l(),g("tr",ge,[e("td",pe,[e("div",ue,[r(a).isLoading?(l(),V(v,{key:0,size:4,dark:!0})):b("",!0)])])])):(l(!0),g(D,{key:0},T(r(a).categories,i=>{var f;return l(),g("tr",{key:i.id},[e("td",se,[e("span",ae,o(i.name),1)]),e("td",oe,[e("span",ie,[t[7]||(t[7]=e("i",{class:"icon mgc_sitemap_line"},null,-1)),n(" "+o(((f=i.category)==null?void 0:f.name)??"--"),1)])]),e("td",re,[e("span",ne,o(i.description),1)]),e("td",de,[p(w,{color:i.status==="active"?"green":"red",text:`${i.status==="active"?"<i class='icon mgc_check_fill text-xl'></i>":"<i class='icon mgc_eye_close_line text-xl'></i>"} ${i.status==="active"?s.$t("Active"):s.$t("Inactive")}`},null,8,["color","text"])]),e("td",le,[e("div",ce,[p(h,{color:"blue",class:"whitespace-nowrap",onClick:$=>r(m).push({name:"sub-category.edit",params:{id:i.id}})},{default:_(()=>[t[8]||(t[8]=e("i",{class:"icon mgc_edit_line"},null,-1)),n(" "+o(s.$t("Edit")),1)]),_:1},8,["onClick"]),p(h,{color:"red",class:"whitespace-nowrap",onClick:$=>r(a).onDelete(i.id)},{default:_(()=>[t[9]||(t[9]=e("i",{class:"icon mgc_delete_line"},null,-1)),n(" "+o(s.$t("Delete")),1)]),_:1},8,["onClick"])])])])}),128))])])]),r(a).isLoading?b("",!0):(l(),g("div",he,[e("div",null,[e("p",_e,[e("span",fe,o(r(a).pagination.total),1),n(" "+o(s.$t("Results")),1)])]),e("div",null,[e("div",xe,[e("button",{onClick:t[2]||(t[2]=i=>r(a).fetch(!0,!0)),disabled:r(a).pagination.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[t[10]||(t[10]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),n(" "+o(s.$t("Previous")),1)],8,ye),e("button",{onClick:t[3]||(t[3]=i=>r(a).fetch(!0)),disabled:r(a).pagination.current_page===r(a).pagination.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[n(o(s.$t("Next"))+" ",1),t[11]||(t[11]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,be)])])]))])])])])}}});export{we as default};
