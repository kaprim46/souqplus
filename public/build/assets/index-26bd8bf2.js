import{d as S,r as _,b as M,v as V,c as x,o as d,e as v,f as e,t as n,l as m,j as w,i as h,h as A,n as z,q as y,s as D,S as B,F as E,k as O,B as F,C as L}from"./app-4aaa95f7.js";const P={class:"flex flex-col gap-4"},R={for:"name",class:"block text-sm mb-2 dark:text-white"},G={key:0,class:"text-xs text-red-600 mt-2"},J={for:"description",class:"block text-sm mb-2 dark:text-white"},T={key:0,class:"text-xs text-red-600 mt-2"},q={id:"icon-preview",class:"w-full p-6 bg-white border-dashed border border-gray-400 rounded items-center mx-auto text-center cursor-pointer"},H={for:"upload-icon",class:"cursor-pointer flex flex-col gap-1"},K=["src"],Q={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-gray-700 mx-auto mb-4"},W={class:"mb-2 text-xl font-bold tracking-tight text-gray-700"},X={class:"font-normal text-sm text-gray-400 md:px-6"},Y={class:"font-normal text-sm text-gray-400 md:px-6"},Z={key:0,class:"text-xs text-red-600 mt-2",id:"image-error"},ee={for:"condition_type",class:"block text-sm mb-2 dark:text-white"},te={value:"advertisement_count"},oe={value:"role"},ae={value:"membership_duration"},se={key:0,class:"text-xs text-red-600 mt-2"},ne={key:0},ie={for:"condition_value",class:"block text-sm mb-2 dark:text-white"},le={value:"admin"},re={value:"business"},de={value:"customer"},ce={key:2,class:"text-xs text-red-600 mt-2"},ue={class:"col-span-1 md:col-span-2"},pe={class:"flex justify-end"},ve=S({__name:"DataForm",props:{formData:{type:Object,required:!0}},emits:["update:form","update:errors"],setup(N,{emit:b}){const f=N,i=_({}),s=_(f.formData),u=_(!1),p=_(null),$=b;M([()=>s.value.condition_type,p],([a,t])=>{a&&t!==null?s.value.condition=JSON.stringify({[a]:t}):s.value.condition=""});const U=a=>{var r;const o=(r=a.target.files)==null?void 0:r[0];if(o){const l=new FileReader;l.onload=C=>{var c;s.value.icon=o,s.value.icon_url=(c=C.target)==null?void 0:c.result},l.readAsDataURL(o)}},k=async()=>{u.value=!0;const a=new FormData;a.append("name",s.value.name),a.append("description",s.value.description),a.append("condition_type",s.value.condition_type),s.value.icon&&a.append("icon",s.value.icon),s.value.condition&&a.append("condition",s.value.condition);try{const{data:t}=await D.post("/dashboard/badges",a);t.ok&&$("update:form",{name:"",description:"",icon_url:"",condition_type:"",condition:""}),i.value={},B({group:"dashboard",ok:t.ok,type:t.ok?"success":"error",title:t.ok?"Success":"Error",text:t.message},2e3)}catch(t){t.response.status===422&&(i.value=t.response.data.errors)}finally{u.value=!1}},j=async()=>{if(!s.value.id)return;u.value=!0;const a=new FormData;a.append("_method","PUT"),a.append("name",s.value.name),a.append("description",s.value.description),a.append("condition_type",s.value.condition_type),s.value.icon&&a.append("icon",s.value.icon),s.value.condition&&a.append("condition",s.value.condition);try{const{data:t}=await D.post(`/dashboard/badges/${s.value.id}`,a);console.log(t.ok),t.ok&&$("update:form",t.badge),i.value={},B({group:"dashboard",ok:t.ok,type:t.ok?"success":"error",title:t.ok?"Success":"Error",text:t.message},2e3)}catch(t){t.response.status===422&&(i.value=t.response.data.errors)}finally{u.value=!1}};return V(()=>{var a;(a=f.formData)!=null&&a.id&&(p.value=Object.values(JSON.parse(f.formData.condition))[0]??null)}),(a,t)=>{const o=x("v-input"),r=x("v-textarea"),l=x("v-select"),C=x("v-button");return d(),v("div",P,[e("div",null,[e("label",R,n(a.$t("Name")),1),m(o,{type:"text",id:"name",value:s.value.name,placeholder:a.$t("Name"),"onUpdate:input":t[0]||(t[0]=c=>s.value.name=c)},null,8,["value","placeholder"]),i.value.name?(d(),v("p",G," @"+n(i.value.name[0]),1)):w("",!0)]),e("div",null,[e("label",J,n(a.$t("Description")),1),m(r,{id:"description",value:s.value.description,"onUpdate:input":t[1]||(t[1]=c=>s.value.description=c),placeholder:a.$t("Description")},null,8,["value","placeholder"]),i.value.description?(d(),v("p",T," @"+n(i.value.description[0]),1)):w("",!0)]),e("div",null,[e("div",q,[e("input",{id:"upload-icon",type:"file",class:"hidden",accept:"image/*",onChange:U},null,32),e("label",H,[s.value.icon_url?(d(),v("img",{key:0,src:s.value.icon_url,id:"imgIcon",alt:"Icon",class:"h-[100px] text-gray-700 mx-auto mb-4"},null,8,K)):(d(),v("svg",Q,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"},null,-1)])])),e("span",W,n(a.$t("Upload icon image")),1),e("span",X,n(a.$t("Choose photo size should be less than :size",{size:"2mb"})),1),e("span",Y,n(a.$t("and should be in :format format.",{format:"JPG, PNG, or GIF"})),1),t[7]||(t[7]=e("span",{id:"filename",class:"text-gray-500 bg-gray-200 z-50"},null,-1))])]),i.value.icon?(d(),v("p",Z," @"+n(i.value.icon[0]),1)):w("",!0)]),e("div",null,[e("label",ee,n(a.$t("Condition Type")),1),m(l,{id:"condition_type",value:s.value.condition_type,"onUpdate:value":t[2]||(t[2]=c=>s.value.condition_type=c)},{default:h(()=>[e("option",te,n(a.$t("Advertisement Count")),1),e("option",oe,n(a.$t("Role")),1),e("option",ae,n(a.$t("Membership Duration")),1)]),_:1},8,["value"]),i.value.condition_type?(d(),v("p",se," @"+n(i.value.condition_type[0]),1)):w("",!0)]),s.value.condition_type?(d(),v("div",ne,[e("label",ie,n(a.$t("Condition Value")),1),s.value.condition_type==="role"?(d(),A(l,{key:0,id:"condition_value",value:p.value,"onUpdate:value":t[3]||(t[3]=c=>p.value=c)},{default:h(()=>[e("option",le,n(a.$t("Admin")),1),e("option",re,n(a.$t("Business")),1),e("option",de,n(a.$t("Customer")),1)]),_:1},8,["value"])):(d(),A(o,{key:1,type:"number",id:"condition_value",value:p.value,placeholder:a.$t("Enter Value"),"onUpdate:input":t[4]||(t[4]=c=>p.value=c)},null,8,["value","placeholder"])),i.value.condition?(d(),v("p",ce," @"+n(i.value.condition[0]),1)):w("",!0)])):w("",!0),e("div",ue,[e("div",pe,[m(C,{type:"submit",color:"green",loading:u.value,onClick:t[5]||(t[5]=c=>s.value.id?j():k())},{default:h(()=>[e("i",{class:z(s.value.id?"icon mgc_edit_line":"icon mgc_add_line")},null,2),y(" "+n(s.value.id?a.$t("Update"):a.$t("Create")),1)]),_:1},8,["loading"])])])])}}}),ge={class:"flex flex-col"},me={class:"-m-1.5 overflow-x-auto"},_e={class:"p-1.5 min-w-full"},fe={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700"},ye={class:"px-6 py-2 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700"},he={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},xe={class:"text-sm text-gray-600 dark:text-gray-400"},be={class:"flex gap-x-2"},ke={class:"relative overflow-x-auto"},we={class:"w-full divide-y divide-gray-200 dark:divide-gray-700"},$e={class:"bg-gray-50 dark:bg-slate-800 rtl:text-right ltr:text-left"},Ce={scope:"col",class:"px-6 py-2"},De={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200 whitespace-nowrap"},Ue={scope:"col",class:"px-6 py-2"},je={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200 whitespace-nowrap"},Be={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ne={class:"px-6 py-3"},Ae={class:"flex items-center gap-2"},Ee=["src","alt"],Fe={class:"text-sm text-gray-800 dark:text-gray-200"},Se={class:"px-6 py-3"},Me={class:"px-6 py-3"},Ve={class:"flex justify-end gap-x-2"},ze={key:1},Ie={colspan:"6"},Oe={class:"flex items-center justify-center p-4"},Le={key:0,class:"w-full px-4 sm:px-6 lg:px-8 py-5 mx-auto grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},Pe={class:"text-sm text-gray-600 dark:text-gray-400"},Re={class:"font-semibold text-gray-800 dark:text-gray-200"},Ge={class:"inline-flex gap-x-2"},Je=["disabled"],Te=["disabled"],qe={class:"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2"},Ke=S({__name:"index",setup(N){const b=_(!1),f=_({condition:"",description:"",icon_url:"",name:"",condition_type:""}),i=_({current_page:1,last_page:1,per_page:1,total:0}),s=_(!1),u=_({pagination:1,search:""}),p=_([]),$=()=>{f.value={condition:"",description:"",icon_url:"",name:"",condition_type:""}},U=async t=>{f.value=t,await F(()=>{b.value=!0})},k=async(t=!1,o=!1)=>{s.value=!0;let r={};u.value.search&&(r.search=u.value.search),u.value.pagination&&(r.pagination=1),t&&u.value.pagination&&(o?i.value.current_page--:i.value.current_page++,r.page=i.value.current_page);try{const{data:l}=await D.get("/dashboard/badges",{params:{...r}});l.ok&&(console.log(l),u.value.pagination?(p.value=l.badges.data,i.value={current_page:l.badges.current_page,last_page:l.badges.last_page,per_page:l.badges.per_page,total:l.badges.total}):p.value=l.badges),await F(),s.value=!1}catch{s.value=!1}},j=t=>{if(t.id){const o=p.value.findIndex(r=>r.id===t.id);o!==-1&&(p.value[o]=t)}else k();b.value=!1},a=async t=>{if(t.id&&confirm(L("Are you sure you want to delete this badge?")))try{const{data:o}=await D.delete(`/dashboard/badges/${t.id}`);if(o.ok){const r=p.value.findIndex(l=>l.id===t.id);r!==-1&&p.value.splice(r,1)}B({group:"dashboard",ok:o.ok,type:o.ok?"success":"error",title:o.ok?"Success":"Error",text:o.message},2e3)}catch(o){console.log(o)}};return M(u,()=>{k()},{deep:!0}),V(async()=>k()),(t,o)=>{const r=x("v-input"),l=x("v-button"),C=x("v-loader"),c=x("v-modal");return d(),v(E,null,[e("div",ge,[e("div",me,[e("div",_e,[e("div",fe,[e("div",ye,[e("div",null,[e("h2",he,[o[5]||(o[5]=e("i",{class:"icon mgc_badge_line"},null,-1)),y(" "+n(t.$t("Badges")),1)]),e("p",xe,n(t.$t("Manage badges")),1)]),e("div",be,[m(r,{placeholder:t.$t("Search"),value:u.value.search,"onUpdate:input":o[0]||(o[0]=g=>u.value.search=g)},null,8,["placeholder","value"]),m(l,{color:"blue",onClick:o[1]||(o[1]=g=>{$(),b.value=!0}),"custom-class":"whitespace-nowrap"},{default:h(()=>[o[6]||(o[6]=e("i",{class:"icon mgc_plus_line"},null,-1)),y(" "+n(t.$t("Add badge")),1)]),_:1})])]),e("div",ke,[e("table",we,[e("thead",$e,[e("tr",null,[e("th",Ce,[e("span",De,n(t.$t("Name")),1)]),e("th",Ue,[e("span",je,n(t.$t("Description")),1)]),o[7]||(o[7]=e("th",{scope:"col",class:"text-end"},null,-1))])]),e("tbody",Be,[s.value?(d(),v("tr",ze,[e("td",Ie,[e("div",Oe,[m(C,{size:4,dark:!0})])])])):(d(!0),v(E,{key:0},O(p.value,g=>(d(),v("tr",{key:g.id},[e("td",Ne,[e("div",Ae,[e("img",{src:g.icon_url,alt:g.name,class:"h-[75px] object-cover"},null,8,Ee),e("span",Fe,n(g.name),1)])]),e("td",Se,n(g.description),1),e("td",Me,[e("div",Ve,[m(l,{color:"blue",class:"whitespace-nowrap",onClick:I=>U(g)},{default:h(()=>[o[8]||(o[8]=e("i",{class:"icon mgc_edit_line"},null,-1)),y(" "+n(t.$t("Edit")),1)]),_:1},8,["onClick"]),m(l,{color:"red",class:"whitespace-nowrap",onClick:I=>a(g)},{default:h(()=>[o[9]||(o[9]=e("i",{class:"icon mgc_delete_line"},null,-1)),y(" "+n(t.$t("Delete")),1)]),_:1},8,["onClick"])])])]))),128))])])]),s.value?w("",!0):(d(),v("div",Le,[e("div",null,[e("p",Pe,[e("span",Re,n(i.value.total),1),y(" "+n(t.$t("Results")),1)])]),e("div",null,[e("div",Ge,[e("button",{onClick:o[2]||(o[2]=g=>k(!0,!0)),disabled:i.value.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[o[10]||(o[10]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),y(" "+n(t.$t("Previous")),1)],8,Je),e("button",{onClick:o[3]||(o[3]=g=>k(!0)),disabled:i.value.current_page===i.value.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[y(n(t.$t("Next"))+" ",1),o[11]||(o[11]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,Te)])])]))])])])]),m(c,{"is-open":b.value,"onUpdate:closeModal":o[4]||(o[4]=g=>{b.value=!1,$()})},{title:h(()=>[e("h2",qe,[e("i",{class:z(["icon",f.value.id?"mgc_edit_line":"mgc_plus_line"])},null,2),y(" "+n(f.value.id?t.$t("Edit badge"):t.$t("Add badge")),1)])]),content:h(()=>[m(ve,{"form-data":f.value,"onUpdate:form":j},null,8,["form-data"])]),_:1},8,["is-open"])],64)}}});export{Ke as default};
