import{d as z,r as m,v as A,c as h,o as i,e as d,f as t,q as x,t as l,l as u,i as g,F as C,k as B,h as V,j as _,A as G,s as b,S as $,C as f}from"./app-4aaa95f7.js";const P={class:"flex flex-col"},T={class:"-m-1.5 overflow-x-auto"},I={class:"p-1.5 min-w-full"},R={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700"},q={class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700"},J={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},O={class:"text-sm text-gray-600 dark:text-gray-400"},H={class:"flex flex-col md:flex-row gap-2"},K={class:"relative overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},W={class:"bg-gray-50 dark:bg-slate-800 rtl:text-right ltr:text-left"},X={scope:"col",class:"px-6 py-2"},Y={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200"},Z={class:"divide-y divide-gray-200 dark:divide-gray-700"},ee={class:"h-px px-6 py-2"},te={class:"whitespace-nowrap"},ae={class:"h-px px-6 py-2 text-right"},se={class:"flex items-center justify-end gap-2"},oe={key:1},le={colspan:"6"},ne={class:"flex items-center justify-center p-4"},re={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},ie={for:"title",class:"block text-sm mb-2 dark:text-white"},de={key:0,class:"text-xs text-red-600 mt-2",id:"title-error"},ce={for:"content",class:"block text-sm mb-2 dark:text-white"},ue={key:0,class:"text-xs text-red-600 mt-2",id:"content-error"},pe={id:"logo-preview",class:"w-full p-6 bg-white border-dashed border border-gray-400 rounded items-center mx-auto text-center cursor-pointer"},ve={for:"upload-logo",class:"cursor-pointer flex flex-col gap-1"},me=["src"],ge={class:"mb-2 text-xl font-bold tracking-tight text-gray-700"},fe={class:"font-normal text-sm text-gray-400 md:px-6"},he={class:"font-normal text-sm text-gray-400 md:px-6"},xe={key:0,class:"text-xs text-red-600 mt-2",id:"image-error"},ke=z({__name:"index",setup(_e){const c=m([]),p=m(!1),y=m(!1),v=m(!1),r=m({}),s=m({title:"",content:""}),S=a=>{const e=a.target.files[0],n=new FileReader;n.onload=w=>{var k;s.value.image=e,s.value.image_url=(k=w.target)==null?void 0:k.result},n.readAsDataURL(e)},D=async()=>{y.value=!0;try{const{data:a}=await b.get("/settings/splash-screens");a.ok&&(c.value=a.data)}catch(a){console.error(a)}finally{y.value=!1}},M=async()=>s.value.id?await U():await N(),N=async()=>{v.value=!0;const a=new FormData;a.append("title",s.value.title),a.append("content",s.value.content),s.value.image&&a.append("image",s.value.image);try{const{data:e}=await b.post("/dashboard/splash-screens",a);e.ok&&(c.value.unshift(e.data),p.value=!1),$({group:"dashboard",ok:e.ok,title:e.ok?f("Success"):f("Error"),text:e.message},2e3),r.value={}}catch(e){r.value=e.response.data.errors}finally{v.value=!1}},U=async()=>{v.value=!0;const a=new FormData;a.append("_method","PUT"),a.append("title",s.value.title),a.append("content",s.value.content),s.value.image&&a.append("image",s.value.image);try{const{data:e}=await b.post(`/dashboard/splash-screens/${s.value.id}`,a);e.ok&&(c.value.splice(c.value.findIndex(n=>n.id===s.value.id),1,e.data),p.value=!1),$({group:"dashboard",ok:e.ok,title:e.ok?f("Success"):f("Error"),text:e.message},2e3),r.value={}}catch(e){r.value=e.response.data.errors}finally{v.value=!1}},E=async a=>{try{const{data:e}=await b.delete(`/dashboard/splash-screens/${a}`);e.ok&&(c.value=c.value.filter(n=>n.id!==a)),$({group:"dashboard",ok:e.ok,title:e.ok?f("Success"):f("Error"),text:e.message},2e3)}catch(e){console.error(e)}};return A(async()=>{await D()}),(a,e)=>{const n=h("v-button"),w=h("v-loader"),k=h("v-input"),F=h("v-textarea"),L=h("v-modal");return i(),d(C,null,[t("div",P,[t("div",T,[t("div",I,[t("div",R,[t("div",q,[t("div",null,[t("h2",J,[e[6]||(e[6]=t("i",{class:"icon mgc_cellphone_line"},null,-1)),x(" "+l(a.$t("Splash Screens")),1)]),t("p",O,l(a.$t("Manage your splash screens")),1)]),t("div",H,[u(n,{color:"green",class:"whitespace-nowrap",onClick:e[0]||(e[0]=o=>{p.value=!0,s.value={title:"",content:""}})},{default:g(()=>[e[7]||(e[7]=t("i",{class:"icon mgc_add_circle_fill"},null,-1)),x(" "+l(a.$t("Create new splash screen")),1)]),_:1})])]),t("div",K,[t("table",Q,[t("thead",W,[t("tr",null,[t("th",X,[t("span",Y,l(a.$t("Name")),1)]),e[8]||(e[8]=t("th",{scope:"col",class:"px-6 py-2"},null,-1))])]),t("tbody",Z,[y.value?(i(),d("tr",oe,[t("td",le,[t("div",ne,[y.value?(i(),V(w,{key:0,size:4,dark:!0})):_("",!0)])])])):(i(!0),d(C,{key:0},B(c.value,o=>(i(),d("tr",{key:o.id},[t("td",ee,[t("span",te,l(o.title),1)]),t("td",ae,[t("div",se,[u(n,{color:"blue",class:"whitespace-nowrap",onClick:j=>{p.value=!0,s.value={id:o.id,title:o.title,content:o.content,image_url:o.image_url}}},{default:g(()=>[e[9]||(e[9]=t("i",{class:"icon mgc_edit_line"},null,-1)),x(" "+l(a.$t("Edit")),1)]),_:1},8,["onClick"]),u(n,{color:"red",class:"whitespace-nowrap",onClick:j=>E(o.id)},{default:g(()=>[e[10]||(e[10]=t("i",{class:"icon mgc_trash_line"},null,-1)),x(" "+l(a.$t("Delete")),1)]),_:1},8,["onClick"])])])]))),128))])])])])])])]),u(L,{"is-open":p.value,"onUpdate:closeModal":e[5]||(e[5]=o=>{p.value=!1,s.value={title:"",content:""}})},{title:g(()=>{var o;return[t("h3",re,l((o=s.value)!=null&&o.id?a.$t("Edit screen"):a.$t("Create screen")),1)]}),content:g(()=>[t("form",{class:"flex flex-col gap-y-4",onSubmit:e[4]||(e[4]=G(o=>M(),["prevent"]))},[t("div",null,[t("label",ie,l(a.$t("Title")),1),u(k,{type:"text",id:"title",value:s.value.title,placeholder:a.$t("Name"),"onUpdate:input":e[1]||(e[1]=o=>s.value.title=o)},null,8,["value","placeholder"]),r.value.title?(i(),d("p",de," @"+l(r.value.title[0]),1)):_("",!0)]),t("div",null,[t("label",ce,l(a.$t("Content")),1),u(F,{id:"content",value:s.value.content,placeholder:a.$t("Content"),"onUpdate:input":e[2]||(e[2]=o=>s.value.content=o)},null,8,["value","placeholder"]),r.value.content?(i(),d("p",ue," @"+l(r.value.content[0]),1)):_("",!0)]),t("div",null,[t("div",pe,[t("input",{id:"upload-logo",type:"file",class:"hidden",accept:"image/*",onChange:e[3]||(e[3]=o=>S(o))},null,32),t("label",ve,[s.value.image_url?(i(),d("img",{key:0,src:s.value.image_url,id:"imgLogo",alt:"Screen",class:"h-[100px] text-gray-700 mx-auto mb-4"},null,8,me)):_("",!0),e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-gray-700 mx-auto mb-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1)),t("span",ge,l(a.$t("Upload screen image")),1),t("span",fe,l(a.$t("Choose photo size should be less than :size",{size:"2mb"})),1),t("span",he,l(a.$t("and should be in :format format.",{format:"JPG, PNG, or GIF"})),1),e[12]||(e[12]=t("span",{id:"filename",class:"text-gray-500 bg-gray-200 z-50"},null,-1))])]),r.value.image?(i(),d("p",xe," @"+l(r.value.image[0]),1)):_("",!0)]),u(n,{color:"blue",type:"submit",class:"whitespace-nowrap",disabled:v.value,loading:v.value},{default:g(()=>[e[13]||(e[13]=t("i",{class:"icon mgc_save_line"},null,-1)),x(" "+l(a.$t("Save")),1)]),_:1},8,["disabled","loading"])],32)]),_:1},8,["is-open"])],64)}}});export{ke as default};
