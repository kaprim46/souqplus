import{d as V,r as N,z as q,B as _,v as O,c as k,o as i,e as n,f as t,t as a,l as d,j as u,i as x,F as S,k as U,g as F,q as w,n as z,s as M,S as D,w as b}from"./app-4aaa95f7.js";import{s as K}from"./Category-ccc6bb69.js";import{u as A}from"./CategoryStore-7fabd6e6.js";import{u as L}from"./FilterStore-fc34adbf.js";const R={class:"grid gap-4 grid-cols-1 md:grid-cols-2"},G={for:"name",class:"block text-sm mb-2 dark:text-white"},H={key:0,class:"text-xs text-red-600 mt-2",id:"name-error"},J={for:"category_id",class:"block text-sm mb-2 dark:text-white"},P=["value"],Q={key:0,class:"text-xs text-red-600 mt-2",id:"category_id-error"},W={for:"status",class:"block text-sm mb-2 dark:text-white"},X={value:"active"},Y={value:"inactive"},Z={key:0,class:"text-xs text-red-600 mt-2",id:"status-error"},ee={for:"description",class:"block text-sm mb-2 dark:text-white"},te={key:0,class:"text-xs text-red-600 mt-2",id:"description-error"},oe={class:"text-2xl font-bold dark:text-white col-span-1 md:col-span-2"},se={for:"meta_title",class:"block text-sm mb-2 dark:text-white"},ae={key:0,class:"text-xs text-red-600 mt-2",id:"meta_title-error"},re={for:"meta_robots",class:"block text-sm mb-2 dark:text-white"},le={value:"index, follow"},ie={value:"noindex, follow"},ne={value:"index, nofollow"},de={value:"noindex, nofollow"},ue={key:0,class:"text-xs text-red-600 mt-2",id:"meta_robots-error"},ce={for:"meta_description",class:"block text-sm mb-2 dark:text-white"},me={key:0,class:"text-xs text-red-600 mt-2",id:"meta_description-error"},pe={for:"meta_keywords",class:"block text-sm mb-2 dark:text-white"},ve={key:0,class:"text-xs text-red-600 mt-2",id:"meta_keywords-error"},fe={class:"text-2xl font-bold dark:text-white col-span-1 md:col-span-2"},_e={class:"flex flex-wrap gap-4"},ke=["onChange","checked"],xe={class:"font-semibold text-base"},be={class:"col-span-1 md:col-span-2"},ye={class:"flex justify-end"},Ne=V({__name:"DataForm",props:{formData:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form","update:errors"],setup(l,{emit:I}){const s=N(l.formData),v=N(!1),y=A(),c=I,h=L(),B=e=>{var f,m,p;const o=(f=s.value.filters)==null?void 0:f.findIndex(g=>g===e.id);if(o!==-1)return(m=s.value.filters)==null?void 0:m.splice(o,1);(p=s.value.filters)==null||p.push(e.id)},E=async()=>{v.value=!0,await _();try{const{data:e}=await M.post("/dashboard/sub/categories",s.value);e.ok&&c("update:form",{name:"",description:"",status:K.active,meta_title:"",meta_description:"",meta_keywords:"",meta_robots:"",category_id:null}),c("update:errors",{}),D({group:"dashboard",ok:e.ok,title:e.ok?b("Success"):b("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&c("update:errors",e.response.data.errors)}finally{v.value=!1}},T=async()=>{if(s.value.id){v.value=!0,await _();try{const{data:e}=await M.put(`/dashboard/sub/categories/${s.value.id}`,s.value);e.ok&&c("update:form",e.category),c("update:errors",{}),D({group:"dashboard",ok:e.ok,title:e.ok?b("Success"):b("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&c("update:errors",e.response.data.errors)}finally{v.value=!1}}};return q(async()=>{h.filters.pagination=0,await _(async()=>h.fetchFilters())}),O(async()=>{y.filters.pagination=0,await _(),await y.fetch()}),(e,o)=>{const f=k("v-input"),m=k("v-select"),p=k("v-textarea"),g=k("v-button");return i(),n("div",R,[t("div",null,[t("label",G,a(e.$t("Name")),1),d(f,{type:"text",id:"name",value:s.value.name,placeholder:e.$t("Name"),"onUpdate:input":o[0]||(o[0]=r=>s.value.name=r)},null,8,["value","placeholder"]),l.errors.name?(i(),n("p",H," @"+a(l.errors.name[0]),1)):u("",!0)]),t("div",null,[t("label",J,a(e.$t("Category")),1),d(m,{id:"category_id",value:s.value.category_id,"onUpdate:value":o[1]||(o[1]=r=>s.value.category_id=r)},{default:x(()=>[(i(!0),n(S,null,U(F(y).categories,r=>(i(),n("option",{key:r.id,value:r.id},a(r.name),9,P))),128))]),_:1},8,["value"]),l.errors.category_id?(i(),n("p",Q," @"+a(l.errors.category_id[0]),1)):u("",!0)]),t("div",null,[t("label",W,a(e.$t("Status")),1),d(m,{id:"status",value:s.value.status,"onUpdate:value":o[2]||(o[2]=r=>s.value.status=r)},{default:x(()=>[t("option",X,a(e.$t("Active")),1),t("option",Y,a(e.$t("Inactive")),1)]),_:1},8,["value"]),l.errors.status?(i(),n("p",Z," @"+a(l.errors.status[0]),1)):u("",!0)]),t("div",null,[t("label",ee,a(e.$t("Description")),1),d(p,{id:"description",value:s.value.description,placeholder:e.$t("Description"),"onUpdate:input":o[3]||(o[3]=r=>s.value.description=r)},null,8,["value","placeholder"]),l.errors.description?(i(),n("p",te," @"+a(l.errors.description[0]),1)):u("",!0)]),o[11]||(o[11]=t("hr",{class:"col-span-1 md:col-span-2"},null,-1)),t("h3",oe,[o[9]||(o[9]=t("i",{class:"icon mgc_layout_top_fill"},null,-1)),w(" "+a(e.$t("SEO")),1)]),t("div",null,[t("label",se,a(e.$t("Meta Title")),1),d(f,{type:"text",id:"meta_title",value:s.value.meta_title,placeholder:e.$t("Meta Title"),"onUpdate:input":o[4]||(o[4]=r=>s.value.meta_title=r)},null,8,["value","placeholder"]),l.errors.meta_title?(i(),n("p",ae," @"+a(l.errors.meta_title[0]),1)):u("",!0)]),t("div",null,[t("label",re,a(e.$t("Meta Robots")),1),d(m,{id:"meta_robots",value:s.value.meta_robots,"onUpdate:value":o[5]||(o[5]=r=>s.value.meta_robots=r)},{default:x(()=>[t("option",le,a(e.$t("Index, Follow")),1),t("option",ie,a(e.$t("Noindex, Follow")),1),t("option",ne,a(e.$t("Index, Nofollow")),1),t("option",de,a(e.$t("Noindex, Nofollow")),1)]),_:1},8,["value"]),l.errors.meta_robots?(i(),n("p",ue," @"+a(l.errors.meta_robots[0]),1)):u("",!0)]),t("div",null,[t("label",ce,a(e.$t("Meta Description")),1),d(p,{id:"meta_description",value:s.value.meta_description,placeholder:e.$t("Meta Description"),"onUpdate:input":o[6]||(o[6]=r=>s.value.meta_description=r)},null,8,["value","placeholder"]),l.errors.meta_description?(i(),n("p",me," @"+a(l.errors.meta_description[0]),1)):u("",!0)]),t("div",null,[t("label",pe,a(e.$t("Meta Keywords")),1),d(p,{id:"meta_keywords",value:s.value.meta_keywords,placeholder:e.$t("Meta Keywords"),"onUpdate:input":o[7]||(o[7]=r=>s.value.meta_keywords=r)},null,8,["value","placeholder"]),l.errors.meta_keywords?(i(),n("p",ve," @"+a(l.errors.meta_keywords[0]),1)):u("",!0)]),o[12]||(o[12]=t("hr",{class:"col-span-1 md:col-span-2"},null,-1)),t("h3",fe,[o[10]||(o[10]=t("i",{class:"icon mgc_filter_2_fill"},null,-1)),w(" "+a(e.$t("Filters")),1)]),t("div",_e,[(i(!0),n(S,null,U(F(h).data_filters,(r,j)=>{var $;return i(),n("label",{key:j,class:"flex items-center gap-1"},[t("input",{type:"checkbox",class:"form-checkbox",onChange:C=>B(r),checked:(($=s.value.filters)==null?void 0:$.findIndex(C=>C===r.id))!==-1},null,40,ke),t("span",xe,a(r.name),1)])}),128))]),t("div",be,[t("div",ye,[d(g,{type:"submit",color:"green",loading:v.value,onClick:o[8]||(o[8]=r=>s.value.id?T():E())},{default:x(()=>[t("i",{class:z(s.value.id?"icon mgc_edit_line":"icon mgc_add_line")},null,2),w(" "+a(s.value.id?e.$t("Update"):e.$t("Create")),1)]),_:1},8,["loading"])])])])}}});export{Ne as _};
