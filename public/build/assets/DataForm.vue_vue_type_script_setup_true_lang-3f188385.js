import{d as N,r as S,c as u,o as l,e as d,f as a,t as n,j as m,q as v,l as f,i as b,n as q,B as g,S as h,w as p}from"./app-4aaa95f7.js";import{s as F}from"./Category-ccc6bb69.js";const B={class:"grid gap-4 md:grid-cols-2"},D={for:"icon",class:"block text-sm mb-2 dark:text-white"},E={class:"flex flex-row gap-2"},O=["src"],T={class:"h-[45px] w-full rounded-lg bg-blue-600 font-semibold text-white text-[15.5px] flex items-center justify-center gap-2 relative"},V={key:0,class:"text-xs text-red-600 mt-2",id:"icon-error"},L={for:"name",class:"block text-sm mb-2 dark:text-white"},R={key:0,class:"text-xs text-red-600 mt-2",id:"name-error"},I={for:"status",class:"block text-sm mb-2 dark:text-white"},z={value:"active"},A={value:"inactive"},P={key:0,class:"text-xs text-red-600 mt-2",id:"status-error"},G={class:"col-span-1 md:col-span-2"},H={for:"content",class:"block text-sm mb-2 dark:text-white"},J={key:0,class:"text-xs text-red-600 mt-2",id:"content-error"},K={class:"col-span-2"},M={class:"flex justify-end"},X=N({__name:"DataForm",props:{form:{type:Object,required:!0},errors:{type:Object,required:!0}},emits:["update:form","update:errors"],setup(o,{emit:x}){const c=S(!1),s=o,i=x,k=t=>URL.createObjectURL(t),y=async()=>{c.value=!0,await g();const t=new FormData;t.append("name",s.form.name),t.append("status",s.form.status),t.append("content",s.form.content),s.form.icon&&typeof s.form.icon!="string"&&t.append("icon",s.form.icon);try{const{data:e}=await axios.post("/dashboard/pages",t);e.ok&&i("update:form",{name:"",description:"",status:F.active,content:"",icon:null}),i("update:errors",{}),h({group:"dashboard",ok:e.ok,title:e.ok?p("Success"):p("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&i("update:errors",e.response.data.errors)}finally{c.value=!1}},w=async()=>{if(!s.form.id)return;c.value=!0,await g();const t=new FormData;t.append("_method","PUT"),t.append("name",s.form.name),t.append("status",s.form.status),t.append("content",s.form.content),s.form.icon&&typeof s.form.icon!="string"&&t.append("icon",s.form.icon);try{const{data:e}=await axios.post(`/dashboard/pages/${s.form.id}`,t);e.ok&&i("update:form",e.page),i("update:errors",{}),h({group:"dashboard",ok:e.ok,title:e.ok?p("Success"):p("Error"),text:e.message},2e3)}catch(e){e.response.status===422&&i("update:errors",e.response.data.errors)}finally{c.value=!1}};return(t,e)=>{const $=u("v-input"),C=u("v-select"),U=u("v-editor"),j=u("v-button");return l(),d("div",B,[a("div",null,[a("label",D,n(t.$t("Icon")),1),a("div",E,[o.form.icon?(l(),d("img",{key:0,src:typeof o.form.icon=="object"?k(o.form.icon):o.form.icon_url,class:"h-[45px] w-[45px] rounded-lg",alt:"icon"},null,8,O)):m("",!0),a("div",T,[e[5]||(e[5]=a("i",{class:"icon mgc_upload_line"},null,-1)),v(" "+n(t.$t("Upload icon"))+" ",1),a("input",{type:"file",id:"icon",name:"icon",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*",onChange:e[0]||(e[0]=r=>o.form.icon=r.target.files[0])},null,32)])]),o.errors.icon?(l(),d("p",V," @"+n(o.errors.icon[0]),1)):m("",!0)]),a("div",null,[a("label",L,n(t.$t("Name")),1),f($,{type:"text",id:"name",name:"name",required:"","aria-describedby":"name-error",value:o.form.name,placeholder:t.$t("Name"),"onUpdate:input":e[1]||(e[1]=r=>o.form.name=r)},null,8,["value","placeholder"]),o.errors.name?(l(),d("p",R," @"+n(o.errors.name[0]),1)):m("",!0)]),a("div",null,[a("label",I,n(t.$t("Status")),1),f(C,{id:"status",name:"status",required:"","aria-describedby":"status-error",value:o.form.status,placeholder:t.$t("Status"),"onUpdate:value":e[2]||(e[2]=r=>o.form.status=r)},{default:b(()=>[a("option",z,n(t.$t("Active")),1),a("option",A,n(t.$t("Inactive")),1)]),_:1},8,["value","placeholder"]),o.errors.status?(l(),d("p",P," @"+n(o.errors.status[0]),1)):m("",!0)]),a("div",G,[a("label",H,n(t.$t("Content")),1),f(U,{"onUpdate:input":e[3]||(e[3]=r=>o.form.content=r),value:o.form.content,placeholder:t.$t("Content")},null,8,["value","placeholder"]),o.errors.content?(l(),d("p",J," @"+n(o.errors.content[0]),1)):m("",!0)]),a("div",K,[a("div",M,[f(j,{type:"submit",color:"green",loading:c.value,onClick:e[4]||(e[4]=r=>o.form.id?w():y())},{default:b(()=>[a("i",{class:q(o.form.id?"icon mgc_edit_line":"icon mgc_add_line")},null,2),v(" "+n(o.form.id?t.$t("Update"):t.$t("Create")),1)]),_:1},8,["loading"])])])])}}});export{X as _};
