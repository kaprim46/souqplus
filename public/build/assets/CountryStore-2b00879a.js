import{G as g,s as r,B as n,H as l,C as s,S as c}from"./app-4aaa95f7.js";const h=g({id:"country",state:()=>({countries:[],cities:[],pagination:{current_page:1,last_page:1,per_page:1,total:0},isLoading:!0,isLoadingAction:!1,filters:{},filtersCities:{},paginationCities:{current_page:1,last_page:1,per_page:1,total:0}}),getters:{},actions:{async fetchCountries(e=!1,t=!1){this.isLoading=!0;let i={};this.filters.search&&(i.search=this.filters.search),this.filters.pagination&&(i.pagination=1),e&&this.filters.pagination&&(t?this.pagination.current_page--:this.pagination.current_page++,i.page=this.pagination.current_page);try{const{data:a}=await r.get("/countries",{params:{...i}});a.ok&&(this.filters.pagination?(this.countries=a.countries.data,this.pagination={current_page:a.countries.current_page,last_page:a.countries.last_page,per_page:a.countries.per_page,total:a.countries.total}):this.countries=a.countries),await n(),this.isLoading=!1}catch{this.isLoading=!1}},async onDeleteCountry(e){const{value:t}=await l.fire({title:s("Are you sure?"),text:s("You will not be able to recover this country!"),icon:"warning",showCancelButton:!0,confirmButtonText:s("Yes, delete it!"),cancelButtonText:s("No, keep it")});if(t)try{const{data:i}=await r.delete(`/dashboard/countries/${e}`);i.ok&&(this.countries=this.countries.filter(a=>a.id!==e)),await n(),c({group:"dashboard",ok:i.ok,title:i.ok?s("Success"):s("Error"),text:i.message},2e3)}catch(i){console.log(i)}},async onUpdateCountry(e){if(e.id){this.isLoadingAction=!0;try{const{data:t}=await r.put(`/dashboard/countries/${e.id}`,e);return t.ok&&(this.countries=this.countries.map(i=>i.id===e.id?e:i)),await n(),c({group:"dashboard",ok:t.ok,title:t.ok?s("Success"):s("Error"),text:t.message},2e3),t.ok}catch(t){console.log(t)}finally{this.isLoadingAction=!1}}},async onCreateCountry(e){this.isLoadingAction=!0;try{const{data:t}=await r.post("/dashboard/countries",e);return t.ok&&this.countries.push(t.country),await n(),c({group:"dashboard",ok:t.ok,title:t.message,text:t.message},2e3),t.ok}catch(t){console.log(t)}finally{this.isLoadingAction=!1}},async fetchCities(e=!1,t=!1,i){this.isLoading=!0;let a={};this.filtersCities.search&&(a.search=this.filtersCities.search),this.filtersCities.pagination&&(a.pagination=1),e&&this.filtersCities.pagination&&(t?this.paginationCities.current_page--:this.paginationCities.current_page++,a.page=this.paginationCities.current_page);try{const{data:o}=await r.get(i?`/cities/${i}`:"/cities",{params:{...a}});o.ok&&(this.filtersCities.pagination?(this.cities=o.cities.data,this.paginationCities={current_page:o.cities.current_page,last_page:o.cities.last_page,per_page:o.cities.per_page,total:o.cities.total}):this.cities=o.cities),await n(),this.isLoading=!1}catch{this.isLoading=!1}},async onDeleteCity(e){const{value:t}=await l.fire({title:s("Are you sure?"),text:s("You will not be able to recover this country!"),icon:"warning",showCancelButton:!0,confirmButtonText:s("Yes, delete it!"),cancelButtonText:s("No, keep it")});if(t)try{const{data:i}=await r.delete(`/dashboard/cities/${e}`);i.ok&&(this.cities=this.cities.filter(a=>a.id!==e)),await n(),c({group:"dashboard",ok:i.ok,title:i.ok?s("Success"):s("Error"),text:i.message},2e3)}catch(i){console.log(i)}},async onUpdateCity(e){if(e.id){this.isLoadingAction=!0;try{const{data:t}=await r.put(`/dashboard/cities/${e.id}`,e);return t.ok&&(this.cities=this.cities.map(i=>i.id===e.id?e:i)),await n(),c({group:"dashboard",ok:t.ok,title:t.ok?s("Success"):s("Error"),text:t.message},2e3),t.ok}catch(t){console.log(t)}finally{this.isLoadingAction=!1}}},async onCreateCity(e){this.isLoadingAction=!0;try{const{data:t}=await r.post("/dashboard/cities",e);return t.ok&&this.cities.push(t.city),await n(),c({group:"dashboard",ok:t.ok,title:t.message,text:t.message},2e3),t.ok}catch(t){console.log(t)}finally{this.isLoadingAction=!1}}}});export{h as u};
