import{d as j,r as x,b as B,v as A,B as b,c as v,o as c,e as p,f as e,q as r,t as i,l as d,i as g,g as n,F as m,k as h,j as L,A as M}from"./app-4aaa95f7.js";import{u as U}from"./CountryStore-2b00879a.js";const V={class:"flex flex-col"},D={class:"-m-1.5 overflow-x-auto"},E={class:"p-1.5 min-w-full"},F={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700"},T={class:"px-6 py-2 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700"},q={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},z={class:"text-sm text-gray-600 dark:text-gray-400"},O={class:"flex gap-x-2"},P={class:"relative overflow-x-auto"},R={class:"w-full divide-y divide-gray-200 dark:divide-gray-700"},G={class:"bg-gray-50 dark:bg-slate-800 rtl:text-right ltr:text-left"},H={scope:"col",class:"px-6 py-2"},I={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200 whitespace-nowrap"},J={scope:"col",class:"px-6 py-2"},K={class:"text-xs font-semibold uppercase tracking-wide text-gray-800 dark:text-gray-200 whitespace-nowrap"},Q={class:"divide-y divide-gray-200 dark:divide-gray-700"},W={class:"px-6 py-3"},X={class:"text-sm text-gray-800 dark:text-gray-200"},Y={class:"px-6 py-3"},Z={class:"px-6 py-3"},ee={class:"flex justify-end gap-x-2"},te={key:1},se={colspan:"6"},oe={class:"flex items-center justify-center p-4"},ae={key:0,class:"px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700"},ie={class:"text-sm text-gray-600 dark:text-gray-400"},ne={class:"font-semibold text-gray-800 dark:text-gray-200"},le={class:"inline-flex gap-x-2"},de=["disabled"],re=["disabled"],ue={class:"flex flex-col gap-1"},ce={for:"name",class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},pe={class:"flex flex-col gap-1"},ge={for:"country_id",class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},ve={value:"",disabled:"",selected:""},ye=["value"],xe=j({__name:"index",setup(me){const a=U(),u=x(!1),l=x({name:""});B(u,async o=>{o&&(a.filters.pagination=0,await b(async()=>{await a.fetchCountries()}))});const k=async()=>{l.value.id?await a.onUpdateCity(l.value)&&(l.value={name:""},u.value=!1):await a.onCreateCity(l.value)&&(l.value={name:""},u.value=!1)};return A(async()=>{a.filtersCities.pagination=1,await b(async()=>{await a.fetchCities()})}),(o,t)=>{const f=v("v-input"),y=v("v-button"),w=v("v-badge"),C=v("v-loader"),$=v("v-select"),N=v("v-modal");return c(),p(m,null,[e("div",V,[e("div",D,[e("div",E,[e("div",F,[e("div",T,[e("div",null,[e("h2",q,[t[7]||(t[7]=e("i",{class:"icon mgc_map_pin_fill"},null,-1)),r(" "+i(o.$t("Cities")),1)]),e("p",z,i(o.$t("Manage your Cities")),1)]),e("div",O,[d(f,{placeholder:o.$t("Search")},null,8,["placeholder"]),d(y,{color:"blue",onClick:t[0]||(t[0]=s=>u.value=!0),"custom-class":"whitespace-nowrap"},{default:g(()=>[t[8]||(t[8]=e("i",{class:"icon mgc_plus_line"},null,-1)),r(" "+i(o.$t("Add City")),1)]),_:1})])]),e("div",P,[e("table",R,[e("thead",G,[e("tr",null,[e("th",H,[e("span",I,i(o.$t("Name")),1)]),e("th",J,[e("span",K,i(o.$t("Country")),1)]),t[9]||(t[9]=e("th",{scope:"col",class:"text-end"},null,-1))])]),e("tbody",Q,[n(a).isLoading?(c(),p("tr",te,[e("td",se,[e("div",oe,[d(C,{size:4,dark:!0})])])])):(c(!0),p(m,{key:0},h(n(a).cities,s=>{var _;return c(),p("tr",{key:s.id},[e("td",W,[e("span",X,i(s.name),1)]),e("td",Y,[d(w,{color:"blue",text:`<i class='mgc_map_pin_fill'></i> ${(_=s.country)==null?void 0:_.name}`},null,8,["text"])]),e("td",Z,[e("div",ee,[d(y,{color:"blue",class:"whitespace-nowrap",onClick:S=>{l.value=s,u.value=!0}},{default:g(()=>[t[10]||(t[10]=e("i",{class:"icon mgc_edit_line"},null,-1)),r(" "+i(o.$t("Edit")),1)]),_:1},8,["onClick"]),d(y,{color:"red",class:"whitespace-nowrap",onClick:S=>n(a).onDeleteCity(s.id)},{default:g(()=>[t[11]||(t[11]=e("i",{class:"icon mgc_delete_line"},null,-1)),r(" "+i(o.$t("Delete")),1)]),_:1},8,["onClick"])])])])}),128))])])]),n(a).isLoading?L("",!0):(c(),p("div",ae,[e("div",null,[e("p",ie,[e("span",ne,i(n(a).paginationCities.total),1),r(" "+i(o.$t("Results")),1)])]),e("div",null,[e("div",le,[e("button",{onClick:t[1]||(t[1]=s=>n(a).fetchCities(!0,!0)),disabled:n(a).paginationCities.current_page===1,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[t[12]||(t[12]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),r(" "+i(o.$t("Previous")),1)],8,de),e("button",{onClick:t[2]||(t[2]=s=>n(a).fetchCities(!0)),disabled:n(a).paginationCities.current_page===n(a).paginationCities.last_page,type:"button",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},[r(i(o.$t("Next"))+" ",1),t[13]||(t[13]=e("svg",{class:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1))],8,re)])])]))])])])]),d(N,{"is-open":u.value,"onUpdate:closeModal":t[6]||(t[6]=s=>{u.value=!1,l.value={name:""}})},{title:g(()=>{var s;return[r(i((s=l.value)!=null&&s.id?o.$t("Edit City"):o.$t("Add City")),1)]}),content:g(()=>[e("form",{class:"flex flex-col gap-y-4",onSubmit:t[5]||(t[5]=M(s=>k(),["prevent"]))},[e("div",ue,[e("label",ce,i(o.$t("Name")),1),d(f,{id:"name",placeholder:o.$t("Name"),value:l.value.name,"onUpdate:input":t[3]||(t[3]=s=>l.value.name=s)},null,8,["placeholder","value"])]),e("div",pe,[e("label",ge,i(o.$t("Country")),1),d($,{id:"country_id",value:l.value.country_id,"onUpdate:value":t[4]||(t[4]=s=>l.value.country_id=s)},{default:g(()=>[e("option",ve,i(o.$t("Select Country")),1),(c(!0),p(m,null,h(n(a).countries,s=>(c(),p("option",{key:s.id,value:s.id},i(s.name),9,ye))),128))]),_:1},8,["value"])]),d(y,{color:"blue",type:"submit",class:"whitespace-nowrap",disabled:n(a).isLoadingAction,loading:n(a).isLoadingAction},{default:g(()=>[t[14]||(t[14]=e("i",{class:"icon mgc_save_line"},null,-1)),r(" "+i(o.$t("Save")),1)]),_:1},8,["disabled","loading"])],32)]),_:1},8,["is-open"])],64)}}});export{xe as default};
