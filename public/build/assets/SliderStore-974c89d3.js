import{G as p,s as r,B as n,H as d,C as s,S as o}from"./app-4aaa95f7.js";const g=p({id:"explore-slider",state:()=>({sliders:[],slider:{},pagination:{current_page:1,last_page:1,per_page:1,total:1},isLoading:!0,filters:{},isLoadingAction:!1,errors:{}}),getters:{},actions:{async getSliders(t=!1,i=!1){this.isLoading=!0;let e={};this.filters.search&&(e.search=this.filters.search),this.filters.order_by&&(e.order_by=this.filters.order_by),this.filters.pagination&&(e.pagination=this.filters.pagination,t&&(i?this.pagination.current_page--:this.pagination.current_page++),e.page=this.pagination.current_page);try{const{data:a}=await r.get("/explore-slider",{params:{...e}});a.ok&&(this.sliders=this.filters.pagination?a.exploreSliders.data:a.exploreSliders,console.log(this.sliders),this.filters.pagination&&(this.pagination={current_page:a.exploreSliders.current_page,last_page:a.exploreSliders.last_page,per_page:a.exploreSliders.per_page,total:a.exploreSliders.total})),await n(),this.isLoading=!1}catch{this.isLoading=!1}},async onDelete(t){const{value:i}=await d.fire({title:s("Are you sure?"),text:s("You will not be able to recover this slider!"),icon:"warning",showCancelButton:!0,confirmButtonText:s("Yes, delete it!"),cancelButtonText:s("No, keep it")});if(i)try{const{data:e}=await r.delete(`/dashboard/explore-slider/${t}`);e.ok&&(this.sliders=this.sliders.filter(a=>a.id!==t)),await n(),o({group:"dashboard",ok:e.ok,title:e.ok?s("Success"):s("Error"),text:e.message},2e3)}catch(e){console.log(e)}},async createSlider(t){this.isLoadingAction=!0;try{let i=new FormData;t.title&&i.append("title",t.title),t.description&&i.append("description",t.description),t.link&&i.append("link",t.link),i.append("image",t.image),this.errors={};const{data:e}=await r.post("/dashboard/explore-slider",i);return e.ok&&(this.sliders.unshift(e.slider),o({group:"dashboard",ok:e.ok,title:e.ok?s("Success"):s("Error"),text:e.message},2e3)),e.ok}catch(i){i.response.status===422&&(this.errors=i.response.data.errors)}finally{this.isLoadingAction=!1}},async updateSlider(t){this.isLoadingAction=!0;try{let i=new FormData;t.image&&typeof t.image=="object"&&i.append("image",t.image),t.title&&i.append("title",t.title),t.description&&i.append("description",t.description),t.link&&i.append("link",t.link),i.append("_method","PUT");const{data:e}=await r.post(`/dashboard/explore-slider/${t.id}`,i);if(this.errors={},e.ok){const a=this.sliders.findIndex(l=>l.id===t.id);a!==-1&&(this.sliders[a]=e.slider),o({group:"dashboard",ok:e.ok,title:e.ok?s("Success"):s("Error"),text:e.message},2e3)}return e.ok}catch(i){console.log(i)}finally{this.isLoadingAction=!1}}}});export{g as u};
