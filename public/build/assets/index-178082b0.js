import{d as B,m as D,c as _,o as d,e as u,g as e,f as o,t as a,l as c,j as p,i as g,q as h,F as j,x as G,z,G as R,s as T,S as V,w as E,b as O,U as q,k as I,A as F,r as J,n as w,h as A}from"./app-4aaa95f7.js";import{u as H}from"./CountryStore-2b00879a.js";const K={key:0,class:"grid grid-cols-1 gap-y-4",action:"#",method:"POST",onsubmit:"event.preventDefault();",id:"password-form"},Q={for:"current-password",class:"block text-sm mb-2 dark:text-white"},W={key:0,class:"text-xs text-red-600 mt-2",id:"current-password-error"},X={for:"password",class:"block text-sm mb-2 dark:text-white"},Y={key:0,class:"text-xs text-red-600 mt-2",id:"password-error"},Z={for:"confirm-password",class:"block text-sm mb-2 dark:text-white"},ee={key:0,class:"text-xs text-red-600 mt-2",id:"confirm-password-error"},se={class:"flex items-center justify-end"},te={key:1,class:"flex justify-center items-center"},oe=B({__name:"password",setup(b){const t=D();return(s,l)=>{const r=_("v-input"),n=_("v-button"),f=_("v-loader");return d(),u(j,null,[e(t).isLoadingMe?p("",!0):(d(),u("form",K,[o("div",null,[o("label",Q,a(s.$t("Current Password")),1),c(r,{type:"password",id:"current-password",value:e(t).passwordForm.current_password,placeholder:s.$t("Current Password"),"onUpdate:input":l[0]||(l[0]=v=>e(t).passwordForm.current_password=v)},null,8,["value","placeholder"]),e(t).errors.current_password?(d(),u("p",W," @"+a(e(t).errors.current_password[0]),1)):p("",!0)]),o("div",null,[o("label",X,a(s.$t("Password")),1),c(r,{type:"password",id:"password",value:e(t).passwordForm.password,placeholder:s.$t("Password"),"onUpdate:input":l[1]||(l[1]=v=>e(t).passwordForm.password=v)},null,8,["value","placeholder"]),e(t).errors.password?(d(),u("p",Y," @"+a(e(t).errors.password[0]),1)):p("",!0)]),o("div",null,[o("label",Z,a(s.$t("Confirm Password")),1),c(r,{type:"password",id:"confirm-password",value:e(t).passwordForm.password_confirmation,placeholder:s.$t("Confirm Password"),"onUpdate:input":l[2]||(l[2]=v=>e(t).passwordForm.password_confirmation=v)},null,8,["value","placeholder"]),e(t).errors.password_confirmation?(d(),u("p",ee," @"+a(e(t).errors.password_confirmation[0]),1)):p("",!0)]),o("div",se,[c(n,{type:"submit",color:"green",loading:e(t).isLoadingMe,disabled:e(t).isLoadingMe,onClick:e(t).updatePassword},{default:g(()=>[l[3]||(l[3]=o("i",{class:"icon mgc_save_line"},null,-1)),h(" "+a(s.$t("Save")),1)]),_:1},8,["loading","disabled","onClick"])])])),e(t).isLoadingMe?(d(),u("div",te,[c(f,{color:"blue",size:8})])):p("",!0)],64)}}}),re={key:0,class:"grid grid-cols-1 gap-y-4",action:"#",method:"POST",onsubmit:"event.preventDefault();",id:"profile-form"},ie={class:"grid gap-y-4"},ne={class:"flex items-center gap-5"},le={for:"avatar",class:"w-[85px] h-[85px] rounded-full overflow-hidden bg-gray-200 dark:bg-gray-800 flex items-center justify-center cursor-pointer"},ae=["src"],de={for:"name",class:"block text-sm mb-2 dark:text-white"},ue={key:0,class:"text-xs text-red-600 mt-2",id:"name-error"},pe={for:"email",class:"block text-sm mb-2 dark:text-white"},ce={key:0,class:"text-xs text-red-600 mt-2",id:"email-error"},me={for:"phone",class:"block text-sm mb-2 dark:text-white"},_e={key:0,class:"text-xs text-red-600 mt-2",id:"phone-error"},be={for:"bio",class:"block text-sm mb-2 dark:text-white"},ve={key:0,class:"text-xs text-red-600 mt-2",id:"bio-error"},fe={class:"flex items-center justify-end gap-5"},ge={key:1,class:"flex justify-center items-center"},he=B({__name:"profile",setup(b){const t=D();return G("$swal"),z(async()=>await t.fetchProfile()),(s,l)=>{const r=_("v-input"),n=_("v-phoneInput"),f=_("v-textarea"),v=_("v-button"),y=_("v-loader");return d(),u(j,null,[e(t).isLoadingMe?p("",!0):(d(),u("form",re,[o("div",ie,[o("div",ne,[o("label",le,[o("img",{src:e(t).me.avatar_url,alt:"avatar",class:"w-full h-full object-cover"},null,8,ae),o("input",{type:"file",id:"avatar",name:"avatar",class:"hidden",onChange:l[0]||(l[0]=(...m)=>e(t).uploadAvatar&&e(t).uploadAvatar(...m))},null,32)])]),o("div",null,[o("label",de,a(s.$t("Full Name")),1),c(r,{type:"text",id:"name",value:e(t).me.name,placeholder:s.$t("Full Name"),"onUpdate:input":l[1]||(l[1]=m=>e(t).me.name=m)},null,8,["value","placeholder"]),e(t).errors.name?(d(),u("p",ue,"@"+a(e(t).errors.name[0]),1)):p("",!0)]),o("div",null,[o("label",pe,a(s.$t("Email Address")),1),c(r,{type:"email",id:"email",value:e(t).me.email,placeholder:s.$t("Email Address"),"onUpdate:input":l[2]||(l[2]=m=>e(t).me.email=m),disabled:!0},null,8,["value","placeholder"]),e(t).errors.email?(d(),u("p",ce,"@"+a(e(t).errors.email[0]),1)):p("",!0)]),o("div",null,[o("label",me,a(s.$t("Phone Number")),1),c(n,{"onUpdate:phoneNumber":l[3]||(l[3]=m=>e(t).me.phone_number=m),"onUpdate:countryCode":l[4]||(l[4]=m=>e(t).me.country_code=m),value:e(t).me.phone_number,valueCountryCode:e(t).me.country_code??"+212"},null,8,["value","valueCountryCode"]),e(t).errors.phone_number?(d(),u("p",_e,"@"+a(e(t).errors.phone_number[0]),1)):p("",!0)]),o("div",null,[o("label",be,a(s.$t("Bio")),1),c(f,{id:"bio",value:e(t).me.bio,placeholder:s.$t("Bio"),"onUpdate:input":l[5]||(l[5]=m=>e(t).me.bio=m)},null,8,["value","placeholder"]),e(t).errors.bio?(d(),u("p",ve,"@"+a(e(t).errors.bio[0]),1)):p("",!0)]),o("div",fe,[c(v,{type:"submit",color:"green",loading:e(t).isLoadingMe,disabled:e(t).isLoadingMe,onClick:e(t).updateProfile},{default:g(()=>[l[6]||(l[6]=o("i",{class:"icon mgc_save_line"},null,-1)),h(" "+a(s.$t("Save")),1)]),_:1},8,["loading","disabled","onClick"])])])])),e(t).isLoadingMe?(d(),u("div",ge,[c(y,{color:"blue",size:8})])):p("",!0)],64)}}}),ye=R({id:"main",state:()=>({store:{},errors:{},isLoadingMe:!1,isLoading:!1}),getters:{},actions:{uploadStoreLogo(b){var l;const t=(l=b.target.files)==null?void 0:l[0],s=new FileReader;t&&s.readAsDataURL(t),s.onload=()=>{this.store&&(this.store.business_logo=t,this.store.business_logo_url=s.result)},s.onerror=()=>{console.log("Error: ",s.error)}},uploadCoverImage(b){var l;const t=(l=b.target.files)==null?void 0:l[0],s=new FileReader;t&&s.readAsDataURL(t),s.onload=()=>{this.store&&(this.store.cover_image=t,this.store.business_cover_url=s.result)},s.onerror=()=>{console.log("Error: ",s.error)}},async fetchProfile(){this.isLoadingMe=!0;try{const{data:b}=await T.get("/me");b.ok&&(this.store=b.user.business_info)}catch{return!1}finally{this.isLoadingMe=!1}},async onStoreUpdate(){var b,t,s,l,r,n,f,v,y,m,L,M,P,k,$,C,S,U;this.isLoading=!0;try{let i=new FormData;i.append("business_type",((b=this.store)==null?void 0:b.business_type)??""),i.append("business_name",((t=this.store)==null?void 0:t.business_name)??""),i.append("business_district",((s=this.store)==null?void 0:s.business_district)??""),i.append("business_bio",((l=this.store)==null?void 0:l.business_bio)??""),i.append("phone_number",((r=this.store)==null?void 0:r.phone_number)??""),i.append("country_code",((n=this.store)==null?void 0:n.country_code)??""),i.append("business_email",((f=this.store)==null?void 0:f.business_email)??""),i.append("city_id",((m=(y=(v=this.store)==null?void 0:v.city)==null?void 0:y.id)==null?void 0:m.toString())??""),i.append("country_id",((P=(M=(L=this.store)==null?void 0:L.country)==null?void 0:M.id)==null?void 0:P.toString())??""),(k=this.store)!=null&&k.business_logo&&i.append("business_logo",($=this.store)==null?void 0:$.business_logo),(C=this.store)!=null&&C.cover_image&&i.append("cover_image",(S=this.store)==null?void 0:S.cover_image),i.append("business_location",JSON.stringify((U=this.store)==null?void 0:U.business_location)),i.append("_method","PUT");const{data:x}=await T.post("/me/store",i);this.errors={},V({group:"dashboard",ok:x.ok,title:x.ok?E("Success"):E("Error"),text:x.message},2e3)}catch(i){i.response.status===422&&(this.errors=i.response.data.errors)}finally{this.isLoading=!1}}}}),xe={class:"relative h-[300px] mb-16"},we={id:"cover",class:"relative h-[300px] overflow-hidden rounded-lg group"},ke=["src"],$e={class:"w-[100px] h-[100px] rounded-full overflow-hidden absolute bottom-0 transform translate-y-1/2 left-1/2 -translate-x-1/2 ring-4 ring-white group"},Ce=["src"],Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ue={for:"type",class:"block text-sm mb-2 dark:text-white"},Le={key:0,class:"text-xs text-red-600 mt-2",id:"type-error"},Me={for:"business-name",class:"block text-sm mb-2 dark:text-white"},Pe={key:0,class:"text-xs text-red-600 mt-2",id:"business-name-error"},Fe={for:"phone",class:"block text-sm mb-2 dark:text-white"},je={key:0,class:"text-xs text-red-600 mt-2",id:"phone-error"},Be={for:"email",class:"block text-sm mb-2 dark:text-white"},Ne={key:0,class:"text-xs text-red-600 mt-2",id:"email-error"},Ae={class:"col-span-1 lg:col-span-2"},De={for:"content",class:"block text-sm mb-2 dark:text-white"},Te={key:0,class:"text-xs text-red-600 mt-2",id:"bio-error"},Ee={for:"country_id",class:"block text-sm mb-2 dark:text-white"},Ie={value:"0"},ze=["value"],Ge={key:0,class:"text-xs text-red-600 mt-2",id:"country_id-error"},Re={key:0},Ve={for:"city",class:"block text-sm mb-2 dark:text-white"},Oe={value:"0"},qe=["value"],Je={key:0,class:"text-xs text-red-600 mt-2",id:"city-error"},He={for:"district",class:"block text-sm mb-2 dark:text-white"},Ke={key:0,class:"text-xs text-red-600 mt-2",id:"district-error"},Qe={for:"location",class:"block text-sm mb-2 dark:text-white"},We={key:0,class:"text-xs text-red-600 mt-2",id:"location-error"},Xe={class:"flex items-center justify-end"},Ye=B({__name:"store",setup(b){const t=H(),s=ye();O(()=>{var r;return(r=s.store.country)==null?void 0:r.id},async r=>{r&&await t.fetchCities(!1,!1,r)},{immediate:!0,deep:!0});const l=(r,n)=>{if(r==="business_location"){s.store[r]={lat:n.lat(),lng:n.lng()};return}s.store[r]=n};return z(async()=>{await t.fetchCountries(),await s.fetchProfile()}),(r,n)=>{var k,$,C,S,U;const f=_("v-input"),v=_("v-phoneInput"),y=_("v-textarea"),m=_("v-select"),L=_("GMapMarker"),M=_("GMapMap"),P=_("v-button");return e(s).isLoadingMe?p("",!0):(d(),u("form",{key:0,onSubmit:n[14]||(n[14]=F((...i)=>e(s).onStoreUpdate&&e(s).onStoreUpdate(...i),["prevent"])),class:"flex flex-col gap-5"},[o("div",xe,[o("div",we,[o("img",{src:e(s).store.business_cover_url,alt:"cover",class:"w-full h-full object-cover"},null,8,ke),o("input",{type:"file",id:"cover-image",name:"cover-image",class:"hidden",onChange:n[0]||(n[0]=(...i)=>e(s).uploadCoverImage&&e(s).uploadCoverImage(...i))},null,32),c(q,{name:"fade",mode:"out-in"},{default:g(()=>[...n[15]||(n[15]=[o("div",{class:"absolute gap-2 p-2 bg-black inset-0 hidden group-hover:flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300"},[o("label",{for:"cover-image",class:"cursor-pointer"},[o("i",{class:"icon mgc_upload_2_fill text-6xl text-white"})])],-1)])]),_:1})]),o("div",$e,[o("img",{src:e(s).store.business_logo_url,alt:"avatar",class:"w-full h-full object-cover"},null,8,Ce),o("input",{type:"file",id:"avatar",name:"avatar",class:"hidden",onChange:n[1]||(n[1]=(...i)=>e(s).uploadStoreLogo&&e(s).uploadStoreLogo(...i))},null,32),n[16]||(n[16]=o("div",{class:"absolute inset-0 gap-2 p-2 bg-black bg-opacity-50 hidden group-hover:flex items-center justify-center transition-all duration-300"},[o("label",{for:"avatar",class:"cursor-pointer"},[o("i",{class:"icon mgc_upload_2_fill text-4xl text-white"})])],-1))])]),o("div",Se,[o("div",null,[o("label",Ue,a(r.$t("Type of Business")),1),c(f,{type:"text",id:"type",name:"type",value:e(s).store.business_type,placeholder:r.$t("Type of Business"),"onUpdate:input":n[2]||(n[2]=i=>l("business_type",i))},null,8,["value","placeholder"]),e(s).errors.business_type?(d(),u("p",Le," @"+a(e(s).errors.business_type[0]),1)):p("",!0)]),o("div",null,[o("label",Me,a(r.$t("Business Name")),1),c(f,{type:"text",id:"business-name",name:"business-name",value:e(s).store.business_name,placeholder:r.$t("Business Name"),"onUpdate:input":n[3]||(n[3]=i=>l("business_name",i))},null,8,["value","placeholder"]),e(s).errors.business_name?(d(),u("p",Pe," @"+a(e(s).errors.business_name[0]),1)):p("",!0)]),o("div",null,[o("label",Fe,a(r.$t("Phone Number")),1),c(v,{"onUpdate:phoneNumber":n[4]||(n[4]=i=>e(s).store.phone_number=i),"onUpdate:countryCode":n[5]||(n[5]=i=>e(s).store.country_code=i),value:e(s).store.phone_number,valueCountryCode:e(s).store.country_code??"+212"},null,8,["value","valueCountryCode"]),e(s).errors.phone_number?(d(),u("p",je," @"+a(e(s).errors.phone_number[0]),1)):p("",!0)]),o("div",null,[o("label",Be,a(r.$t("Email")),1),c(f,{type:"text",id:"email",name:"email",value:e(s).store.business_email,placeholder:r.$t("Email"),"onUpdate:input":n[6]||(n[6]=i=>l("business_email",i))},null,8,["value","placeholder"]),e(s).errors.business_email?(d(),u("p",Ne," @"+a(e(s).errors.business_email[0]),1)):p("",!0)]),o("div",Ae,[o("label",De,a(r.$t("Bio")),1),c(y,{id:"bio",value:e(s).store.business_bio,placeholder:r.$t("Bio"),"onUpdate:input":n[7]||(n[7]=i=>l("business_bio",i))},null,8,["value","placeholder"]),e(s).errors.business_bio?(d(),u("p",Te," @"+a(e(s).errors.business_bio[0]),1)):p("",!0)]),o("div",null,[o("label",Ee,a(r.$t("Country")),1),c(m,{id:"country_id",name:"country_id",value:(k=e(s).store.country)==null?void 0:k.id,"onUpdate:value":n[8]||(n[8]=i=>e(s).store.country.id=i)},{default:g(()=>[o("option",Ie,a(r.$t("Select Country")),1),(d(!0),u(j,null,I(e(t).countries,i=>(d(),u("option",{key:i.id,value:i.id}," @"+a(i.name),9,ze))),128))]),_:1},8,["value"]),e(s).errors.country_id?(d(),u("p",Ge," @"+a(e(s).errors.country_id[0]),1)):p("",!0)]),!e(t).isLoadingAction&&(($=e(s).store.country)!=null&&$.id)?(d(),u("div",Re,[o("label",Ve,a(r.$t("City")),1),c(m,{id:"city_id",name:"city_id",value:(C=e(s).store.city)==null?void 0:C.id,"onUpdate:value":n[9]||(n[9]=i=>e(s).store.city.id=i)},{default:g(()=>[o("option",Oe,a(r.$t("Select City")),1),(d(!0),u(j,null,I(e(t).cities,i=>(d(),u("option",{key:i.id,value:i.id}," @"+a(i.name),9,qe))),128))]),_:1},8,["value"]),e(s).errors.city_id?(d(),u("p",Je," @"+a(e(s).errors.city_id[0]),1)):p("",!0)])):p("",!0),o("div",null,[o("label",He,a(r.$t("District")),1),c(f,{type:"text",id:"district",name:"district",value:e(s).store.business_district,placeholder:r.$t("District"),"onUpdate:input":n[10]||(n[10]=i=>l("business_district",i))},null,8,["value","placeholder"]),e(s).errors.business_district?(d(),u("p",Ke," @"+a(e(s).errors.business_district[0]),1)):p("",!0)]),o("div",null,[o("label",Qe,a(r.$t("Location")),1),c(M,{center:{lat:((S=e(s).store.business_location)==null?void 0:S.lat)??0,lng:((U=e(s).store.business_location)==null?void 0:U.lng)??0},zoom:15,"onUpdate:center":n[13]||(n[13]=i=>l("business_location",i)),class:"w-full h-[300px] rounded-lg overflow-hidden"},{default:g(()=>{var i,x;return[c(L,{position:{lat:((i=e(s).store.business_location)==null?void 0:i.lat)??0,lng:((x=e(s).store.business_location)==null?void 0:x.lng)??0},clickable:!0,draggable:!0,onClick:n[11]||(n[11]=N=>l("business_location",N.latLng)),onDragend:n[12]||(n[12]=N=>l("business_location",N.latLng))},null,8,["position"])]}),_:1},8,["center"]),e(s).errors.business_location?(d(),u("p",We," @"+a(e(s).errors.business_location[0]),1)):p("",!0)])]),o("div",Xe,[c(P,{type:"submit",color:"green",loading:e(s).isLoading},{default:g(()=>[n[17]||(n[17]=o("i",{class:"icon mgc_save_line"},null,-1)),h(" "+a(r.$t("Save")),1)]),_:1},8,["loading"])])],32))}}}),Ze={class:"block bg-white rounded shadow"},es={class:"space-y-0.5 p-5"},ss={class:"text-2xl font-bold tracking-tight"},ts={class:"text-muted-foreground"},os={class:"flex flex-col md:flex-row"},rs={class:"w-full md:w-[20rem] ltr:border-r rtl:border-l"},is={class:"flex flex-col divide-y"},ns={id:"tab",class:"flex-1 p-5"},ds=B({__name:"index",setup(b){const t=J("profile"),s=D();return(l,r)=>(d(),u("div",Ze,[o("div",es,[o("h2",ss,[r[3]||(r[3]=o("i",{class:"icon mgc_profile_fill"},null,-1)),h(" "+a(l.$t("Account")),1)]),o("p",ts,a(l.$t("Update your account settings.")),1)]),r[7]||(r[7]=o("hr",{class:"border-gray-200"},null,-1)),o("div",os,[o("nav",rs,[o("ul",is,[e(s).me.role==="business"?(d(),u("li",{key:0,class:w(["px-4 py-2",{"bg-blue-50":t.value==="store"}])},[o("a",{href:"#store",class:w(["text-[15.4px] flex items-center gap-1",{"text-blue-800":t.value==="store"}]),onClick:r[0]||(r[0]=F(n=>t.value="store",["prevent"]))},[r[4]||(r[4]=o("i",{class:"icon mgc_store_2_fill text-xl"},null,-1)),h(" "+a(l.$t("Store")),1)],2)],2)):p("",!0),o("li",{class:w(["px-4 py-2",{"bg-blue-50":t.value==="profile"}])},[o("a",{href:"#profile",class:w(["text-[15.4px] flex items-center gap-1",{"text-blue-800":t.value==="profile"}]),onClick:r[1]||(r[1]=F(n=>t.value="profile",["prevent"]))},[r[5]||(r[5]=o("i",{class:"icon mgc_user_1_fill text-xl"},null,-1)),h(" "+a(l.$t("Profile")),1)],2)],2),o("li",{class:w(["px-4 py-2",{"bg-blue-50":t.value==="password"}])},[o("a",{href:"#password",class:w(["text-[15.4px] flex items-center gap-1",{"text-blue-800":t.value==="password"}]),onClick:r[2]||(r[2]=F(n=>t.value="password",["prevent"]))},[r[6]||(r[6]=o("i",{class:"icon mgc_user_security_line text-xl"},null,-1)),h(" "+a(l.$t("Password")),1)],2)],2)])]),o("div",ns,[t.value==="profile"?(d(),A(he,{key:0})):p("",!0),t.value==="password"?(d(),A(oe,{key:1})):p("",!0),t.value==="store"?(d(),A(Ye,{key:2})):p("",!0)])])]))}});export{ds as default};
